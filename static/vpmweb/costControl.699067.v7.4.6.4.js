webpackJsonp([3],{874:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(395),n=o(i),l=a(786),d=o(l),s=a(688),r=o(s),c=a(54),m=o(c),u=a(55),p=o(u),f=a(59),v=o(f),h=a(93),y=o(h),g=a(8),D=o(g),F=a(4),k=a(652),b=function(e){function t(e){(0,m["default"])(this,t);var a=(0,v["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return a.icostmodelChange=function(e){var t=a,o=e.target.value,i="";i="2"==o?"1":"3"==o?"11":"0";var n=t.dynamic.getFieldValue,l=n("iresmodel"),s=n("itimemodel"),r={loadType:"costcontrol",init:"false",icostmodel:o,icosttype:i,iresmodel:l,itimemodel:s};(0,F.vpAdd)("/{vpmprovider}/vpm/cost/loadForm",{sparam:(0,d["default"])(r)}).then(function(e){t.setState({increaseData:e.data.form,entityrole:!0})})},a.icosttypeChange=function(e){var t=a,o=e.target.value,i=a.dynamic.getFieldValue,n=i("icostmodel"),l=i("iresmodel"),s=i("itimemodel"),r={loadType:"costcontrol",init:"false",icostmodel:n,icosttype:o,iresmodel:l,itimemodel:s};(0,F.vpAdd)("/{vpmprovider}/vpm/cost/loadForm",{sparam:(0,d["default"])(r)}).then(function(e){t.setState({increaseData:e.data.form,entityrole:!0})})},a.iresmodelChange=function(e){var t=a,o=e.target.value,i=t.dynamic.getFieldValue,n=i("icostmodel"),l=i("icosttype"),s=i("itimemodel"),r={loadType:"costcontrol",init:"false",icostmodel:n,icosttype:l,iresmodel:o,itimemodel:s};(0,F.vpAdd)("/{vpmprovider}/vpm/cost/loadForm",{sparam:(0,d["default"])(r)}).then(function(e){t.setState({increaseData:e.data.form,entityrole:!0})})},a.itimemodelChange=function(e){var t=a,o=e.target.value,i=t.dynamic.getFieldValue,n=i("icostmodel"),l=i("icosttype"),s=i("iresmodel"),r={loadType:"costcontrol",init:"false",icostmodel:n,icosttype:l,iresmodel:s,itimemodel:o};(0,F.vpAdd)("/{vpmprovider}/vpm/cost/loadForm",{sparam:(0,d["default"])(r)}).then(function(e){t.setState({increaseData:e.data.form,entityrole:!0})})},a.state={increaseData:[],formdata:[],entityrole:!1},a.handleCancel=a.handleCancel.bind(a),a.handleOk=a.handleOk.bind(a),a.saveRowData=a.saveRowData.bind(a),a.loadForm=a.loadForm.bind(a),a}return(0,y["default"])(t,e),(0,p["default"])(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({entityid:this.props.entityid,iid:this.props.iid},function(){e.loadForm()})}},{key:"componentDidMount",value:function(){$(".control").height($(window).height()-120)}},{key:"componentDidUpdate",value:function(){$(".control").find("#sdescription").height(200)}},{key:"loadForm",value:function(){var e=this,t={loadType:"costcontrol",init:"true"};(0,F.vpAdd)("/{vpmprovider}/vpm/cost/loadForm",{sparam:(0,d["default"])(t)}).then(function(t){e.setState({increaseData:t.data.form,entityrole:!0})})}},{key:"handleCancel",value:function(){var e=this;this.setState({increaseData:[],entityrole:!0},function(){var t=e,a={loadType:"costcontrol",init:"false",icostmodel:"1",icosttype:"0",iresmodel:"1",itimemodel:"1"};(0,F.vpAdd)("/{vpmprovider}/vpm/cost/loadForm",{sparam:(0,d["default"])(a)}).then(function(e){t.setState({increaseData:e.data.form,entityrole:!0})})})}},{key:"handleOk",value:function(){this.saveRowData(this.props.form.getFieldsValue())}},{key:"saveRowData",value:function(e){var t=this;(0,n["default"])(e).forEach(function(t,a){e[t]==undefined?e[t]="":null==e[t]&&(e[t]=0)}),e.newType="costcontrol",(0,F.vpAdd)("/{vpmprovider}/vpm/cost/save",{sparam:(0,d["default"])(e)}).then(function(e){e.data.success?t.setState({entityrole:!1,increaseData:{}},t.loadForm()):(0,F.VpAlertMsg)({message:"消息提示",description:e.data.msg,type:"error",closeText:"关闭",showIcon:!0},5)})}},{key:"render",value:function(){var e=this,t={entityrole:this.state.entityrole};return D["default"].createElement("div",{className:"full-height "},D["default"].createElement("div",{className:"p-sm bg-white control"},D["default"].createElement(k.VpDynamicForm,{ref:function(t){return e.dynamic=t},bindThis:this,className:"p-sm full-height p-b-xxlg",formData:this.state.increaseData,handleOk:this.props.disabled?null:this.saveRowData,handleCancel:this.props.disabled?null:this.handleCancel,params:t,okText:"保 存",cancelText:"重置"})))}}]),t}(g.Component);t["default"]=b=(0,F.VpFormCreate)(b)}});