webpackJsonp([2],{957:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function i(){return[{title:"标题",dataIndex:"stitle",key:"stitle",width:"",fixed:""},{title:"发送时间",dataIndex:"publishdate",key:"publishdate",width:"",fixed:""},{title:"关联实体",dataIndex:"ientityid_name",key:"ientityid_name",width:"",fixed:""},{title:"关联对象名称",dataIndex:"sobjname",key:"sobjname",width:"",fixed:""},{title:"是否已读",dataIndex:"ireadtype",key:"ireadtype",width:"",fixed:""}]}function n(){return[{name:"全部",value:"-1"},{name:"未读",value:"0"},{name:"已读",value:"1"}]}Object.defineProperty(t,"__esModule",{value:!0});var s=a(14),r=l(s),c=a(688),u=l(c),d=a(54),o=l(d),f=a(55),h=l(f),m=a(59),p=l(m),b=a(93),g=l(b),y=a(8),v=l(y),E=a(4),w=a(652),x=function(e){function t(e){(0,o["default"])(this,t);var a=(0,p["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.queryFilterData=function(){a.setState({filterData:n()})},a.handlesearch=function(e){a.setState({searchData:e})},a.filterChange=function(e){a.setState({filterid:e.target.value})},a.onRowClick=function(e,t){(0,E.vpQuery)("/{vpplat}/cfgmsg/get",{iid:e.iid}).then(function(e){a.setState({showRightBox:!0,stitle:e.data.stitle,publiccontent:e.data.publiccontent})})},a.closeRightModal=function(){a.setState({showRightBox:!1},function(){a.tableRef.getTableData()})},a.handleSubmit=function(e){a.closeRightModal()},a.tabsChange=function(){},a.controlAddButton=function(e,t){var l=vp.computedHeight(t.length,".sysmsg");a.setState({tableHeight:l})},a.state={searchData:"",filterid:"-1",filterData:[],isAdd:!0,showRightBox:!1,stitle:"",publiccontent:"",tableHeight:""},a}return(0,g["default"])(t,e),(0,h["default"])(t,[{key:"componentWillMount",value:function(){this.queryFilterData()}},{key:"componentDidMount",value:function(){$(".ant-table-body").height($(window).height()-190)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldProps,a={labelCol:{span:3},wrapperCol:{span:19}};return v["default"].createElement("div",{className:"business-container pr full-height"},v["default"].createElement("div",{className:"subAssembly b-b bg-white"},v["default"].createElement(E.VpRow,{gutter:10},v["default"].createElement(E.VpCol,{className:"gutter-row",span:4},v["default"].createElement(w.SeachInput,{onSearch:this.handlesearch})),v["default"].createElement(E.VpCol,{className:"gutter-row check-radio",span:12},this.state.filterData.length>0?v["default"].createElement(w.CheckRadio,{filterData:this.state.filterData,defaultValue:this.state.filterid,onChange:this.filterChange}):""))),v["default"].createElement("div",{className:"business-wrapper p-t-sm full-height"},v["default"].createElement("div",{className:"p-sm bg-white entity-list"},v["default"].createElement(E.VpTable,{className:"sysmsg",ref:function(t){return e.tableRef=t},dataUrl:"/{vpplat}/cfgmsg/page",columns:i(),params:{searchData:this.state.searchData,filterid:this.state.filterid},controlAddButton:function(t,a){e.controlAddButton(t,a)},scroll:{y:this.state.tableHeight},onRowClick:this.onRowClick,bindThis:this}))),v["default"].createElement("div",{className:"drawer-fixed p-sm hide"},v["default"].createElement("div",{className:"pr full-height"},v["default"].createElement("div",{className:"spin-icon",onclick:"closeDrawer"},v["default"].createElement(E.VpIcon,{type:"verticle-left"})),v["default"].createElement("div",{className:"drawer-box"}))),v["default"].createElement(w.RightBox,{max:!this.state.isAdd,button:v["default"].createElement("div",{className:"icon p-xs",onClick:this.closeRightModal},v["default"].createElement(E.VpTooltip,{placement:"top",title:""},v["default"].createElement(E.VpIcon,{type:"right"}))),show:this.state.showRightBox},v["default"].createElement(E.VpTabs,{defaultActiveKey:"0",onChange:this.tabsChange},v["default"].createElement(E.VpTabPane,{tab:"系统消息",key:"0"},v["default"].createElement(E.VpForm,{horizontal:!0,onSubmit:this.handleSubmit},v["default"].createElement("div",null,v["default"].createElement(E.VpFInput,(0,r["default"])({label:"标题"},a,t("stitle",{initialValue:this.state.stitle}))),v["default"].createElement(E.VpFInput,(0,r["default"])({label:"内容",type:"textarea"},a,t("publiccontent",{initialValue:this.state.publiccontent}),{rows:5,style:{height:400}})))))),v["default"].createElement("div",{className:"footFixed p-sm b-t text-center"},v["default"].createElement(E.VpButton,{className:"vp-btn-br",type:"primary",onClick:function(){return e.handleSubmit("submit")}},"确定"),v["default"].createElement(E.VpButton,{className:"vp-btn-br",style:{marginLeft:"10px"},type:"ghost",onClick:function(){return e.handleSubmit("cancle")}},"取消"))))}}]),t}(y.Component);t["default"]=x=(0,E.VpFormCreate)(x)}});