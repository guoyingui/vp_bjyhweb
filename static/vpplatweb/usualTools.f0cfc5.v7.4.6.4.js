webpackJsonp([14],{982:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(688),i=n(l),o=a(54),s=n(o),r=a(55),c=n(r),u=a(59),d=n(u),f=a(93),p=n(f),m=a(8),h=n(m),g=a(4);a(983);var v=a(985),y=n(v),b=a(986),k=n(b),C=a(987),E=n(C),w=a(990),V=n(w),S=a(991),x=n(S),M=function(e){function t(e){(0,s["default"])(this,t);var a=(0,d["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e));return a.state={tabs:"1"},a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"tabsChange",value:function(e){}},{key:"render",value:function(){return h["default"].createElement("div",{className:"sysdefine-container full-height"},h["default"].createElement("div",{className:"p-sm bg-white full-height usualTool"},h["default"].createElement(g.VpTabs,{className:"full-height",tabPosition:"left",onChange:this.tabsChange},h["default"].createElement(g.VpTabPane,{className:"utiltabs",tab:"工作项干预",key:"2"},h["default"].createElement(E["default"],null)),h["default"].createElement(g.VpTabPane,{className:"utiltabs",tab:"流程干预",key:"1"},h["default"].createElement(k["default"],null)),h["default"].createElement(g.VpTabPane,{className:"utiltabs",tab:"联机用户",key:"3"},h["default"].createElement(y["default"],null)),h["default"].createElement(g.VpTabPane,{className:"utiltabs",tab:"实体升级",key:"4"},h["default"].createElement(V["default"],null)),h["default"].createElement(g.VpTabPane,{className:"utiltabs",tab:"基础数据导出",key:"5"},h["default"].createElement(x["default"],null)))))}}]),t}(h["default"].Component);t["default"]=M=(0,g.VpFormCreate)(M)},983:function(e,t,a){var n=a(984);"string"==typeof n&&(n=[[e.id,n,""]]);var l={hmr:!0};l.transform=void 0;a(439)(n,l);n.locals&&(e.exports=n.locals)},984:function(e,t){},985:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(){return[{title:"用户名称",dataIndex:"user_name",key:"user_name",width:"",fixed:""},{title:"登录IP",dataIndex:"loginip",key:"loginip",width:"",fixed:""},{title:"上次登录时间",dataIndex:"logindate",key:"logindate",width:"",fixed:""}]}Object.defineProperty(t,"__esModule",{value:!0});var i=a(688),o=n(i),s=a(54),r=n(s),c=a(55),u=n(c),d=a(59),f=n(d),p=a(93),m=n(p),h=a(8),g=n(h),v=a(4);a(983);var y=function(e){function t(e){(0,r["default"])(this,t);var a=(0,f["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e));return a.controlAddButton=function(e,t){var n=vp.computedHeight(t.length,".internetUser",170);a.setState({tableHeight:n,resultList:t.length})},a.state={tableHeight:""},a}return(0,m["default"])(t,e),(0,u["default"])(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=vp.computedHeight(this.state.resultList,".internetUser",170);this.setState({tableHeight:e})}},{key:"render",value:function(){var e=this;return g["default"].createElement("div",{className:"sysdefine-container full-height"},g["default"].createElement("div",{className:" bg-white full-height"},g["default"].createElement(v.VpTable,{className:"internetUser",dataUrl:"/{vpplat}/cfgcommon/userList",controlAddButton:function(t,a){e.controlAddButton(t,a)},columns:l(),scroll:{y:this.state.tableHeight},resize:!0})))}}]),t}(g["default"].Component);t["default"]=y=(0,v.VpFormCreate)(y)},986:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(){return[{title:"当前步骤",dataIndex:"activityName",key:"activityName",width:120,fixed:""},{title:"对象名称",dataIndex:"objectName",key:"objectName",width:120,fixed:""},{title:"流程名称",dataIndex:"flowName",key:"flowName",width:120,fixed:""},{title:"到达时间",dataIndex:"createTime",key:"createTime",width:120,fixed:""},{title:"发起人",dataIndex:"startUserName",key:"startUserName",width:120,fixed:""},{title:"处理人",dataIndex:"handlers",key:"handlers",width:120,fixed:""},{title:"版本",dataIndex:"version",key:"version",width:"",fixed:""}]}function i(){return[{name:"全部",value:""},{name:"步骤超时",value:"overtime"},{name:"处理人空",value:"nohandler"}]}Object.defineProperty(t,"__esModule",{value:!0});var o=a(14),s=n(o),r=a(688),c=n(r),u=a(54),d=n(u),f=a(55),p=n(f),m=a(59),h=n(m),g=a(93),v=n(g),y=a(8),b=n(y),k=a(4),C=a(652),E=a(810),w=n(E),V=a(826),S=n(V),x=function(e){function t(e){(0,d["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,c["default"])(t)).call(this,e));return a.getHeader=function(){var e=l();e.push({title:"操作",fixed:"right",width:120,key:"operation",render:function(e,t){return b["default"].createElement("span",null,b["default"].createElement(k.VpTooltip,{placement:"top",title:"查看"},b["default"].createElement(k.VpIcon,{style:{cursor:"pointer",color:"#1c84c6",fontWeight:"bold",fontSize:14,margin:"0 5px"},type:"edit"})),b["default"].createElement(k.VpTooltip,{placement:"top",title:"终止"},b["default"].createElement(k.VpIcon,{onClick:function(e){return a.rowOptions(e,"end",t)},style:{cursor:"pointer",color:"#1c84c6",fontWeight:"bold",fontSize:14,margin:"0 5px"},type:"minus-circle-o"})),b["default"].createElement(k.VpTooltip,{placement:"top",title:"更改处理人"},b["default"].createElement(k.VpIcon,{onClick:function(e){return a.rowOptions(e,"changeChar",t)},style:{cursor:"pointer",color:"#1c84c6",fontWeight:"bold",fontSize:14,margin:"0 5px"},type:"user"})),b["default"].createElement(k.VpTooltip,{placement:"top",title:"自由跳转"},b["default"].createElement(k.VpIcon,{onClick:function(e){return a.rowOptions(e,"jump",t)},style:{cursor:"pointer",color:"#1c84c6",fontWeight:"bold",fontSize:14,margin:"0 5px"},type:"tag-o"})))}}),a.setState({tableHeader:e})},a.queryActStep=function(e){(0,k.vpQuery)("/{vpflow}/rest/workflow/tasks",{key:e}).then(function(e){a.setState({steps:e.data})})},a.rowOptions=function(e,t,n){"end"==t?(e.stopPropagation(),(0,k.vpQuery)("/{vpflow}/rest/process/end-process",{pdId:n.pdId,piId:n.piId}).then(function(e){(0,k.VpAlertMsg)({message:"消息提示",description:"流程已终止！",type:"success",onClose:a.onClose,closeText:"关闭",showIcon:!0},5),a.tableRef.getTableData()})):"changeChar"==t?(e.stopPropagation(),a.setState({userModal:!0,taskId:n.taskId})):"jump"==t&&(e.stopPropagation(),a.setState({visible:!0,activityName:n.activityName,taskId:n.taskId},a.queryActStep(n.flowkey)))},a.handlesearch=function(e){var t=e.replace(/\s/g,"");a.setState({quickvalue:t})},a.closeRightModal=function(){a.setState({showRightBox:!1,increaseData:{}})},a.cancelUserModal=function(){a.setState({userModal:!1})},a.cancelModal=function(){a.setState({visible:!1})},a.closeRight=function(e){a.setState({showRightBox:e,staskid:""})},a.onRowClick=function(e,t){var n=e.piId;(0,k.vpQuery)("/{vpflow}/rest/process/activitytask",{piId:n}).then(function(t){var n=t.data.taskId||"",l=t.data.formkey||"",i=t.data.usermode||"",o=t.data.entityId||"",s=t.data.objectId||"",r=t.data.record||{piId:e.piId,pdId:e.pdId,endTime:e.endTime};a.setState({showRightBox:!0,modaltitle:e.sname,record:r,staskid:n,iid:s,usermode:2!=i,entityid:o,formkey:l})})},a.controlAddButton=function(e,t){var n=vp.computedHeight(t.length,".intervene",220);a.setState({tableHeight:n,resultList:t.length})},a.filterChange=function(e){a.setState({filtervalue:e.target.value})},a.addNewDom=function(){var e=a.state.record;return b["default"].createElement(S["default"],{usermode:a.state.usermode,stepkey:e.activityId,staskid:a.state.staskid,piid:e.piId,pdid:e.pdId,iobjectentityid:a.state.entityid,iobjectid:a.state.iid,entityid:e.iflowentityid,endTime:e.endTime,formkey:a.state.formkey,closeRight:function(e){return a.closeRight(e)},getData:function(){return a.getData()}})},a.okJumpModal=function(){var e=$("#jumpman").attr("idlist");a.props.form.validateFields(function(t,n){n.jumpStepkey==undefined?(0,k.VpAlertMsg)({message:"消息提示",description:"请选择需要跳转的步骤！",type:"error",onClose:a.onClose,closeText:"关闭",showIcon:!0},5):e==undefined||""==e?(0,k.VpAlertMsg)({message:"消息提示",description:"请选择处理人！",type:"error",closeText:"关闭",showIcon:!0},5):(0,k.vpAdd)("/{vpflow}/rest/intervene/jump",{jumpStepkey:n.jumpStepkey,taskId:a.state.taskId,userids:e}).then(function(e){a.cancelModal(),a.tableRef.getTableData(),(0,k.VpAlertMsg)({message:"消息提示",description:"更改步骤成功！",type:"success",onClose:a.onClose,closeText:"关闭",showIcon:!0},5)})})},a.okUserModal=function(e){e.length>0?(0,k.vpQuery)("/{vpflow}/rest/task/transfer-task",{taskId:a.state.taskId,userid:e[0].iid}).then(function(e){(0,k.VpAlertMsg)({message:"消息提示",description:"更改处理人成功！",type:"success",onClose:a.onClose,closeText:"关闭",showIcon:!0},5),a.cancelUserModal(),a.tableRef.getTableData()}):(0,k.VpAlertMsg)({message:"消息提示",description:"请选择处理人！",type:"error",onClose:a.onClose,closeText:"关闭",showIcon:!0},5)},a.showChoosenModal=function(){a.setState({jumpman:!0})},a.cancelJumpChoosen=function(){a.setState({jumpman:!1})},a.submitJumpChoosen=function(e){var t=[],n=[];e.map(function(e,a){t.push(e.iid),n.push(e.sname)}),a.setState({jumpman:!1},function(){$("#jumpman").val(n.join()),$("#jumpman").attr("idlist",t.join())})},a.state={tableHeader:[],filtervalue:"",quickvalue:"",showRightBox:!1,visible:!1,staskid:"",entityid:"",iid:"",record:{},usermode:"",formkey:"",isAdd:!1,activityName:"",steps:[],taskId:"",userModal:!1,tableHeight:"",jumpman:!1},a}return(0,v["default"])(t,e),(0,p["default"])(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillMount",value:function(){this.getHeader()}},{key:"componentDidMount",value:function(){var e=vp.computedHeight(this.state.resultList,".intervene",220);this.setState({tableHeight:e})}},{key:"render",value:function(){var e=this,t=this,a={labelCol:{span:6},wrapperCol:{span:16}},n=t.props.form.getFieldProps;return b["default"].createElement("div",{className:"editlist full-height overflow"},b["default"].createElement("div",{className:"b-b bg-white p-b-sm"},b["default"].createElement(k.VpRow,{gutter:10},b["default"].createElement(k.VpCol,{className:"gutter-row",span:4},b["default"].createElement(C.SeachInput,{onSearch:t.handlesearch})),b["default"].createElement(k.VpCol,{className:"gutter-row check-radio",span:12},b["default"].createElement(C.CheckRadio,{filterData:i(),defaultValue:this.state.filtervalue,onChange:this.filterChange})))),b["default"].createElement("div",{className:"p-t-sm full-height scroll-y",style:{paddingBottom:40}},b["default"].createElement(C.VpDTable,{ref:function(t){return e.tableRef=t},params:{quickvalue:this.state.quickvalue,filtervalue:this.state.filtervalue},controlAddButton:function(t,a){e.controlAddButton(t,a)},dataUrl:"/{vpflow}/rest/intervene/page2",columns:this.state.tableHeader,onRowClick:this.onRowClick,bindThis:this,className:"intervene",scroll:{y:this.state.tableHeight},resize:!0})),b["default"].createElement(C.RightBox,{max:this.state.isAdd,button:b["default"].createElement("div",{className:"icon p-xs",onClick:this.closeRightModal},b["default"].createElement(k.VpTooltip,{placement:"top",title:""},b["default"].createElement(k.VpIcon,{type:"right"}))),show:this.state.showRightBox},this.state.showRightBox?this.addNewDom():null),b["default"].createElement(k.VpModal,{title:"自由跳转",visible:this.state.visible,onOk:function(){return e.okJumpModal()},onCancel:function(){return e.cancelModal()},width:"40%",height:"60%",wrapClassName:"modal-no-footer"},this.state.visible?b["default"].createElement(k.VpForm,{style:{marginTop:20}},b["default"].createElement(k.VpFInput,(0,s["default"])({readOnly:!0},a,{label:"当前步骤",type:"text"},n("currentStep",{initialValue:this.state.activityName}))),b["default"].createElement(k.VpFSelect,(0,s["default"])({label:"跳转步骤"},a),b["default"].createElement(k.VpSelect,(0,s["default"])({defaultValue:""},n("jumpStepkey"),{style:{width:"100%"}}),this.state.steps.map(function(e,t){return b["default"].createElement(k.VpOption,{key:t,value:e.id},e.name)}))),b["default"].createElement(k.VpFInput,(0,s["default"])({label:"处理人",className:"cursor"},a,n("jumpman"),{onClick:function(){e.showChoosenModal()},readOnly:!0,suffix:b["default"].createElement(k.VpIcon,{type:"search",style:{marginTop:7}})}))):""),b["default"].createElement(k.VpModal,{title:"更改处理人",visible:this.state.userModal,onCancel:function(){return e.cancelUserModal()},width:"70%",wrapClassName:"modal-no-footer",footer:null},this.state.userModal?b["default"].createElement(w["default"],{item:{irelationentityid:"2",widget_type:"selectmodel"},initValue:[],params:{},onCancel:function(){return t.cancelUserModal()},onOk:function(e){return t.okUserModal(e)}}):null),b["default"].createElement(k.VpModal,{title:"选择处理人",visible:this.state.jumpman,width:"70%",footer:null,wrapClassName:"modal-no-footer",onCancel:function(){return e.cancelJumpChoosen()}},this.state.jumpman?b["default"].createElement(w["default"],{item:{irelationentityid:"2",widget_type:"selectmodel"},initValue:[],onCancel:function(){return e.cancelJumpChoosen()},onOk:function(t){return e.submitJumpChoosen(t)}}):""))}}]),t}(y.Component);t["default"]=x=(0,k.VpFormCreate)(x)},987:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(395),i=n(l),o=a(802),s=n(o),r=a(688),c=n(r),u=a(54),d=n(u),f=a(55),p=n(f),m=a(59),h=n(m),g=a(93),v=n(g),y=a(8),b=n(y),k=a(4);a(988);var C=a(652),E=a(810),w=n(E),V=function(e){function t(e){(0,d["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,c["default"])(t)).call(this,e));return a.getHeader=function(){var e=a;(0,k.vpAdd)("/{vpplat}/vfm/workInterfer/getListHeader",{}).then(function(t){if(t&&t.hasOwnProperty("data")&&(e.setState({loading:!1}),t.data.hasOwnProperty("grid"))){var a=[];if(t.data.grid.hasOwnProperty("fields")){t.data.grid.fields.map(function(e,t){var n=void 0,l=void 0,i=void 0,o=void 0;for(var s in e)"field_label"==s?n=e[s]:"field_name"==s&&(l=e[s]),"fixed"==s&&(o=e[s]),"field_width"==s&&(i=e[s]);n&&l&&("left"==o||"right"==o?a.push({title:n,dataIndex:l,key:l,width:i,fixed:o}):a.push({title:n,dataIndex:l,key:l,fixed:o}))});var n=b["default"].createElement(k.VpMenu,{onClick:e.menuClick},b["default"].createElement(k.VpMenuItem,{key:"open"},b["default"].createElement("a",null,"重新分配"))),l=[{title:"操作",key:"menu",width:100,render:function(t,a){return b["default"].createElement("div",{style:{textAlign:"center"}},b["default"].createElement(k.VpDropdown,{overlay:n,trigger:["click"]},b["default"].createElement(k.VpIcon,{type:"caret-circle-down",onClick:function(t){return e.handleDropDown(t,a)}})))}}];a.push(l[0]),e.setState({table_headers:a})}}})["catch"](function(e){})},a.getEntityList=function(){var e=a;(0,k.vpAdd)("/{vpplat}/vfm/workInterfer/getEntityList",{}).then(function(t){e.setState({entityTemplate:t.data})})["catch"](function(e){"function"!=typeof e||e()})},a.getData=function(){var e=a;if("-1"==e.state.entityType){var t=vp.computedHeight(0,".workInterfer");return void a.setState({tableHeight:t-30,table_array:[],cur_page:1,total_rows:0,num_perpage:10,pagination:{total:0,showTotal:!1,pageSize:10}})}var n=a.state.searchConditon;n.curr=a.state.cur_page,n.limit=a.state.num_perpage;var l=n.ientityid,i=n.sname;""!=l&&l!=undefined||(n.ientityid=a.state.entityType),""==i&&(n.sname=a.state.quickvalue),(0,k.vpAdd)("/{vpplat}/vfm/workInterfer/getListData",{sparam:(0,s["default"])(n)}).then(function(t){var a=t.data,n=function(){return"共"+a.totalRows+"条"},l=vp.computedHeight(a.resultList.length,".workInterfer");e.setState({tableHeight:l-30,table_array:a.resultList,cur_page:a.currentPage,total_rows:a.totalRows,num_perpage:a.numPerPage,pagination:{total:a.totalRows,showTotal:n,pageSize:a.numPerPage,onShowSizeChange:e.onShowSizeChange,showSizeChanger:!0,showQuickJumper:!0}})})["catch"](function(e){"function"!=typeof e||e()})},a.handleDropDown=function(e,t){e.stopPropagation(),a.setState({selectrecord:t})},a.menuClick=function(e,t,n){"open"==e.key&&a.showChangeModal(a.state.selectrecord)},a.openSearchModal=function(){var e=a,t={loadType:"search"};(0,k.vpAdd)("/{vpplat}/vfm/workInterfer/loadForm",{sparam:(0,s["default"])(t)}).then(function(t){e.setState({increaseData:t.data.form})})},a.okSearchModal=function(e){"-1"!=a.state.entityType&&""!=a.state.entityType?((0,i["default"])(e).forEach(function(t,a){e[t]==undefined?e[t]="":null==e[t]&&(e[t]="")}),a.setState({searchStatus:!1,searchConditon:e},function(){a.getData()})):(0,k.VpAlertMsg)({message:"消息提示",description:"请选择实体！",type:"info",closeText:"关闭",showIcon:!0},5)},a.cancelSearchModal=function(){a.setState({searchStatus:!1})},a.btnOptClick=function(e){if("ok"==e){var t=a,n=$("#iassignto").attr("data-id");if(""==n||n==undefined)(0,k.VpAlertMsg)({message:"消息提示",description:"分配给不能为空！",type:"error",onClose:a.onClose,closeText:"关闭",showIcon:!0},5);else{var l=a.state.entityid,i=a.state.iid,o=$("#remark").val(),r=a.state.notifierSelectedArr,c={iassignto:n,remark:o,notifierArr:r};(0,k.vpAdd)("/{vpplat}/vfm/workInterfer/save",{entityid:l,iid:i,sparam:(0,s["default"])(c)}).then(function(e){t.setState({visible:!1,notifierSelectedArr:[]},function(){t.getData()})})}}else"cancel"==e&&a.setState({visible:!1})},a.cancelChoosen=function(){a.setState({updateCharer:!1})},a.submitChoosen=function(e){var t=a.state.clickid;if("iassignto"==t){var n="",l="";e.map(function(e,t){t>0&&(n+=",",l+=","),n+=e.sname,l+=e.iid}),$("#"+t).val(n),$("#"+t).attr("data-id",l),a.cancelChoosen()}else if("notifierDiv"==t){var i=0,o=a.state.notifierArr,s=a.state.notifierSelectedArr;e.map(function(e,t){-1==(i=o.findIndex(function(t){return e.iid===t.value}))&&(o.push({value:e.iid,label:e.sname}),s.push(e.iid))}),a.setState({notifierArr:[],notifierSelectedArr:[]},function(){a.cancelChoosen(),a.setState({notifierArr:o,notifierSelectedArr:s})})}},a.chosenUser=function(e){var t="";"iassignto"==e?t="selectmodel":"notifierDiv"==e&&(t="checkbox"),a.setState({chosenType:t,updateCharer:!0,clickid:e})},a.onChange=function(e){a.setState({notifierSelectedArr:e})},a.handlesearch=function(e){var t=e.replace(/\s/g,"");a.state.entityType>0?a.setState({quickvalue:t,searchConditon:{ientityid:"",sname:""}},function(){a.getData()}):(0,k.VpAlertMsg)({message:"消息提示",description:"请先筛选实体！",type:"error",onClose:a.onClose,closeText:"关闭",showIcon:!0},5)},a.chooseModalVisible=function(e){a.chooseVisible=e},a.handleVisibleChange=function(){if(!a.chooseVisible){a.state.increaseData.groups?a.setState({searchStatus:!a.state.searchStatus}):(0,k.VpAlertMsg)({message:"消息提示",description:"暂无可搜索项，请配置搜索表单！",type:"error",onClose:a.onClose,closeText:"关闭",showIcon:!0},5)}},a.handleEntityChange=function(e){a.setState({entityType:e,searchConditon:{}},function(){a.getData()})},a.state={filters:[],table_headers:[],table_array:[],cur_page:1,num_perpage:10,pagination:{},increaseData:[],visible:!1,showSearch:!1,modaltitle:"",notifierArr:[],notifierSelectedArr:[],updateCharer:!1,chosenType:"selectmodel",clickid:"",searchConditon:{},iassignto:"",iassigntoname:"",selectrecord:{},searchStatus:!1,entityTemplate:[],entityType:"-1",quickvalue:"",tableHeight:""},a.tableChange=a.tableChange.bind(a),a.getHeader=a.getHeader.bind(a),a.getData=a.getData.bind(a),a.okModal=a.okModal.bind(a),a.cancelModal=a.cancelModal.bind(a),a.onRowClick=a.onRowClick.bind(a),a}return(0,v["default"])(t,e),(0,p["default"])(t,[{key:"componentWillMount",value:function(){this.getHeader(),this.openSearchModal(),this.getEntityList()}},{key:"componentDidMount",value:function(){var e=vp.computedHeight(this.state.table_array.length,".workInterfer");this.setState({tableHeight:e-30})}},{key:"onShowSizeChange",value:function(e){}},{key:"tableChange",value:function(e,t,a){var n=this;this.setState({cur_page:e.current||this.state.cur_page,num_perpage:e.pageSize||this.state.num_perpage},function(){n.getData()})}},{key:"showChangeModal",value:function(e){this.setState({iid:e.iid,entityid:e.entityid,modaltitle:"重新分配>"+e.sname,iassignto:e.iassignto,iassigntoname:e.iassigntoname,visible:!0,notifierArr:[]},function(){})}},{key:"onRowClick",value:function(e){this.showChangeModal(e)}},{key:"okModal",value:function(){this.setState({visible:!1,notifierArr:[]})}},{key:"cancelModal",value:function(){this.setState({visible:!1,notifierArr:[]})}},{key:"render",value:function(){var e=this,t=this.state.searchStatus?b["default"].createElement("div",{className:"search-forms bg-white ant-dropdown-menu"},b["default"].createElement(C.VpDynamicForm,{ref:function(t){return e.dynamic=t},bindThis:this,className:"p-sm full-height scroll p-b-xxlg",formData:this.state.increaseData,handleOk:function(t){return e.okSearchModal(t)},handleCancel:this.cancelSearchModal,chooseModalVisible:this.chooseModalVisible,okText:"查 询"})):b["default"].createElement("div",null);return b["default"].createElement("div",{className:"full-height overflow"},b["default"].createElement("div",{className:"p-b-sm m-b-sm b-b bg-white"},b["default"].createElement(k.VpRow,{gutter:1},b["default"].createElement(k.VpCol,{className:"gutter-row",span:4},b["default"].createElement(k.VpSelect,{defaultValue:this.state.entityType,style:{width:150},onChange:this.handleEntityChange},b["default"].createElement(k.VpOption,{value:"-1"},"请选择实体"),this.state.entityTemplate.map(function(e,t){return b["default"].createElement(k.VpOption,{key:t,value:e.hasOwnProperty("value")?e.value:""},e.hasOwnProperty("label")?e.label:"")}))),b["default"].createElement(k.VpCol,{className:"gutter-row",span:4},b["default"].createElement(C.SeachInput,{onSearch:function(t){return e.handlesearch(t)}})),b["default"].createElement(k.VpCol,{className:"gutter-row text-right"},b["default"].createElement(k.VpDropdown,{onClick:function(){return e.handleVisibleChange()},trigger:["click"],overlay:t,onVisibleChange:function(){return e.handleVisibleChange()},visible:this.state.searchStatus},b["default"].createElement("div",{style:{display:"inline-block"},id:"searchbox"},b["default"].createElement(C.FindCheckbox,null)))))),b["default"].createElement("div",{className:"business-wrapper full-height"},b["default"].createElement("div",{className:"bg-white scroll-y full-height"},b["default"].createElement(k.VpTable,{columns:this.state.table_headers,dataSource:this.state.table_array,onChange:this.tableChange,onRowClick:this.onRowClick,pagination:this.state.pagination,rowKey:function(e){return e.iid},className:"workInterfer",scroll:{y:this.state.tableHeight},resize:!0}))),b["default"].createElement(k.VpModal,{title:this.state.modaltitle,visible:this.state.visible,onOk:function(){return e.okModal()},onCancel:function(){return e.cancelModal()},width:"80%",height:"100%",maskClosable:!1,footer:[b["default"].createElement("div",{className:"text-center",key:"btn"},b["default"].createElement(k.VpButton,{className:"vp-btn-br",key:"ok",type:"primary",size:"large",onClick:function(){return e.btnOptClick("ok")}},"确定"),b["default"].createElement(k.VpButton,{className:"vp-btn-br",key:"cancel",type:"primary",size:"large",onClick:function(){return e.btnOptClick("cancel")}},"取消"))]},this.state.visible?b["default"].createElement("div",{className:"business-container full-height"},b["default"].createElement("div",{className:"baseDiv",key:"baseDiv"},b["default"].createElement(k.VpForm,{horizontal:!0},b["default"].createElement(k.VpRow,null,b["default"].createElement(k.VpCol,{span:3,className:"text-center p-lr-sm"},b["default"].createElement("h4",{className:"ant-form-item-required"},"分配给:")),b["default"].createElement(k.VpCol,{span:20},b["default"].createElement(k.VpInput,{id:"iassignto",defaultValue:this.state.iassigntoname,"data-id":this.state.iassignto,suffix:b["default"].createElement(k.VpIcon,{type:"search",style:{marginTop:7},onClick:function(){return e.chosenUser("iassignto")}}),onClick:function(){return e.chosenUser("iassignto")},placeholder:"请选择用户",readOnly:"true"}))),b["default"].createElement(k.VpRow,{style:{marginTop:20}},b["default"].createElement(k.VpCol,{span:3,className:"text-center p-lr-sm"},b["default"].createElement("h4",null,"通知人:")),b["default"].createElement(k.VpCol,{span:20},b["default"].createElement(k.VpRow,{style:{marginTop:5}},b["default"].createElement(k.VpCol,{span:24,className:"text-left"},b["default"].createElement("a",{onClick:function(){return e.chosenUser("notifierDiv")}},b["default"].createElement("h3",null,"查找/添加通知人")))),b["default"].createElement(k.VpRow,{style:{marginTop:5}},b["default"].createElement(k.VpCol,{span:24,className:"text-left"},b["default"].createElement("div",{id:"notifierDiv",className:"notifierDiv"},b["default"].createElement(k.VpRow,{style:{marginTop:3}},b["default"].createElement(k.VpCol,{span:24,className:"padding5"},this.state.notifierArr.length>0?b["default"].createElement(k.VpCheckbox,{options:this.state.notifierArr,defaultValue:this.state.notifierSelectedArr,onChange:this.onChange}):""))))))),b["default"].createElement(k.VpRow,{style:{marginTop:20}},b["default"].createElement(k.VpCol,{span:3,className:"text-center p-lr-sm"},b["default"].createElement("h4",null,"备注:")),b["default"].createElement(k.VpCol,{span:20},b["default"].createElement(k.VpInput,{id:"remark",type:"textarea",rows:5})))))):""),b["default"].createElement(k.VpModal,{title:"干预对象选择",visible:this.state.showSearch,onOk:function(){return e.cancelSearchModal()},onCancel:function(){return e.cancelSearchModal()},width:"60%",height:"100%",maskClosable:!1,footer:null,wrapClassName:"modal-no-footer"},this.state.showSearch?b["default"].createElement(C.VpDynamicForm,{ref:function(t){return e.dynamic=t},bindThis:this,className:"p-sm full-height scroll p-b-xxlg",formData:this.state.increaseData,handleOk:function(t){return e.okSearchModal(t)},handleCancel:this.cancelSearchModal,okText:"查 询"}):""),b["default"].createElement(k.VpModal,{title:"选择用户",visible:this.state.updateCharer,width:"70%",footer:null,wrapClassName:"modal-no-footer",onCancel:function(){return e.cancelChoosen()}},this.state.updateCharer?b["default"].createElement(w["default"],{item:{irelationentityid:"2",widget_type:this.state.chosenType},initValue:[],params:{},onCancel:function(){return e.cancelChoosen()},onOk:function(t){return e.submitChoosen(t)}}):""))}}]),t}(y.Component);t["default"]=V=(0,k.VpFormCreate)(V)},988:function(e,t,a){var n=a(989);"string"==typeof n&&(n=[[e.id,n,""]]);var l={hmr:!0};l.transform=void 0;a(439)(n,l);n.locals&&(e.exports=n.locals)},989:function(e,t){},990:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(688),i=n(l),o=a(54),s=n(o),r=a(55),c=n(r),u=a(59),d=n(u),f=a(93),p=n(f),m=a(8),h=n(m),g=a(4);a(983),a(5);var v=function(e){function t(e){(0,s["default"])(this,t);var a=(0,d["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e));return a.getConfig=function(){var e=a;(0,g.vpAdd)("/{vpplat}/entityConfigUpdate/getConfig",{}).then(function(t){var a=!0;t.data.accesslevel>0&&(a=!1),e.setState({disabled:a})})["catch"](function(e){})},a.uploadClick=function(){a.inputUploader.upload.on("beforeFileQueued",function(e){a.props.form.setFieldsValue({sql_label:e.name}),a.setState({isSelectFile:!0})})},a.uploadSuccess=function(e,t){var n="失败";t.data.sucsess&&(n="成功"),a.setState({percent:100,tips:n,loading:!1,isSelectFile:!1}),a.props.form.setFieldsValue({sql:"",sql_label:""}),a.inputUploader.upload.reset(),t.data.sucsess&&setTimeout(function(){a.cancelModal()},1e3)},a.increase=function(){var e=a.state.percent+10;e>90&&(e=90,window.clearInterval(a.inter)),a.setState({percent:e})},a.configUpdate=function(){var e=a.props.form.getFieldValue("sql_label");if(""==e||e==undefined)a.setState({isSelectFile:!1}),(0,g.VpAlertMsg)({message:"消息提示",description:"请选择文件！",type:"info",closeText:"关闭",showIcon:!0},5);else{var t=!1,n="";e.indexOf("init_override")>=0?(t=!0,n="增量覆盖配置数据文件，继续将会更新本地已有的配置数据，是否继续？"):e.indexOf("init_complete")>=0?(t=!0,n="全量覆盖配置数据文件，继续会删除本地已有的配置数据，是否继续？"):n="",t?a.setState({confirmTitle:n,isSelectFile:t}):a.doConfirm()}},a.doConfirm=function(){a.setState({entityVisible:!0,isSelectFile:!1,tips:"升级中",percent:0,loading:!0}),a.inputUploader.upload.upload()},a.cancel=function(){},a.decline=function(){var e=a.state.percent-10;e<0&&(e=0),a.setState({percent:e})},a.cancelModal=function(){a.setState({entityVisible:!1,percent:0})},a.openBackModel=function(){var e=a;(0,g.vpAdd)("/{vpplat}/entityConfigUpdate/getBackList",{}).then(function(t){t.data.list&&e.setState({backVisible:!0,backFileList:t.data.list})})["catch"](function(e){})},a.download=function(e){(0,g.vpDownLoad)("/{vpplat}/entityConfigUpdate/download",{filepath:e})},a.cancelBackModal=function(){a.setState({backVisible:!1})},a.state={tabs:"1",data_array:[],pagination:"",perpage:1e4,page:1,rows:"",disabled:!0,percent:0,ProgressTitle:"",entityVisible:!1,confirmTitle:"",isSelectFile:!1,tips:"",loading:!1,backFileList:[]},a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"componentWillMount",value:function(){this.getConfig()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return h["default"].createElement("div",{className:"business-container pr full-height"},h["default"].createElement("div",{onClick:this.uploadClick},h["default"].createElement(g.VpRow,{key:"inputRow"},h["default"].createElement(g.VpCol,{span:24},h["default"].createElement(g.VpInputUploader,{form:this.props.form,item:{field_name:"sql",widget_type:"inputupload",field_label:"选择文件",all_line:2,tips:"请选择（*.vpsql,*.sql）",auto:!1,widget:{accept:{title:"sql",extensions:"sql,vpsql"},upload_url:(window.vp.config.URL.devflag?"":"/zuul")+"/{vpplat}/entityConfigUpdate/update"}},uploaderOptions:{timeout:0},ref:function(t){return e.inputUploader=t},onUploadAccept:this.uploadSuccess})))),h["default"].createElement("div",{className:"footFixed p-sm b-t text-center",style:{marginBottom:10}},this.state.isSelectFile?h["default"].createElement(g.VpPopconfirm,{title:this.state.confirmTitle,onConfirm:this.doConfirm,onCancel:this.cancel},this.state.disabled?h["default"].createElement(g.VpButton,{className:"vp-btn-br",type:"primary",onClick:function(){return e.configUpdate()},disabled:!0},"升级"):h["default"].createElement(g.VpButton,{className:"vp-btn-br",type:"primary",onClick:function(){return e.configUpdate()}},"升级")):this.state.disabled?h["default"].createElement(g.VpButton,{className:"vp-btn-br",type:"primary",onClick:function(){return e.configUpdate()},disabled:!0},"升级"):h["default"].createElement(g.VpButton,{className:"vp-btn-br",type:"primary",onClick:function(){return e.configUpdate()}},"升级"),h["default"].createElement(g.VpButton,{className:"vp-btn-br",onClick:function(){return e.openBackModel()},style:{marginLeft:10}},"下载备份")),h["default"].createElement(g.VpModal,{title:"实体升级",visible:this.state.entityVisible,onCancel:function(){return e.cancelModal()},width:"30%",footer:null,style:{height:"60%"},maskClosable:!1,wrapClassName:"modal-no-footer"},this.state.entityVisible?h["default"].createElement(g.VpSpin,{size:"large",spinning:this.state.loading},h["default"].createElement("div",{style:{marginLeft:"20%"}},h["default"].createElement(g.VpProgress,{width:200,type:"circle",percent:this.state.percent,format:function(){return e.state.tips}}))):null),h["default"].createElement(g.VpModal,{title:"备份文件下载",visible:this.state.backVisible,onCancel:function(){return e.cancelBackModal()},width:"60%",footer:null,style:{height:"90%"},maskClosable:!1,wrapClassName:"modal-no-footer"},this.state.backVisible?h["default"].createElement("div",{className:"scroll full-height",style:{marginLeft:20}},h["default"].createElement("div",{className:"bg-white"},this.state.backFileList.map(function(t,a){var n=1;return a>0&&(n=10),h["default"].createElement("div",{key:"rowdiv"+a},h["default"].createElement(g.VpRow,{key:"row"+a,style:{marginTop:n,marginBottom:3},align:"left"},h["default"].createElement(g.VpCol,{span:24,className:"text-left cursor"},h["default"].createElement("a",{id:"filepath"+a,onClick:function(){return e.download(t.path)}},t.path))))}))):""))}}]),t}(h["default"].Component);t["default"]=v=(0,g.VpFormCreate)(v)},991:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(688),i=n(l),o=a(54),s=n(o),r=a(55),c=n(r),u=a(59),d=n(u),f=a(93),p=n(f),m=a(8),h=n(m),g=a(4),v=function(e){function t(e){(0,s["default"])(this,t);var a=(0,d["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e));return a.getConfig=function(){var e=a;(0,g.vpAdd)("/{vpplat}/vfm/studioExport/getConfig",{}).then(function(t){var a=!0;t.data.accesslevel>0&&(a=!1),e.setState({disabled:a})})["catch"](function(e){})},a.wkExport=function(){a.state.checkedValues.length>0&&""!=a.state.expvalues?(0,g.vpDownLoad)("/{vpplat}/exportinit/exp",{checkedValues:a.state.checkedValues.join(),checkModel:a.state.expvalues}):(0,g.VpAlertMsg)({message:"消息提示",description:"请至少选择一个模块和一个导出模式",type:"info",closeText:"关闭",showIcon:!0},5)},a.onChange=function(e){var t=e.findIndex(function(e){return"function"===e}),n=e.findIndex(function(e){return"navigation"===e}),l=e.findIndex(function(e){return"access"===e}),i=[];if(-1!=t){var o=a.state.checkedValues,s=o.findIndex(function(e){return"function"===e}),r=o.findIndex(function(e){return"navigation"===e}),c=o.findIndex(function(e){return"access"===e});-1!=s&&(-1==n&&-1!=r||-1==l&&-1!=c)?e.map(function(e){"function"!=e&&i.push(e)}):-1==s?(e.map(function(e){i.push(e)}),-1==n&&i.push("navigation"),-1==l&&i.push("access")):i=e}else i=e;a.setState({checkedValues:i})},a.onexpChange=function(e){a.setState({expvalues:e.target.value})},a.state={checkedValues:["baseconfig","dictionary","role","quota","entity","schedu"],disabled:!0,expvalues:"1"},a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"componentWillMount",value:function(){this.getConfig()}},{key:"componentDidMount",value:function(){$(".configExport").find(".ant-table-body").height($(document).height()-230)}},{key:"render",value:function(){var e=this,t=[{label:"基础配置",value:"baseconfig",disabled:!1},{label:"数据字典",value:"dictionary",disabled:!1},{label:"实体",value:"entity",disabled:!1},{label:"授权",value:"role",disabled:!1},{label:"考核指标",value:"quota",disabled:!1},{label:"定时任务",value:"schedu",disabled:!1},{label:"部门&工作空间",value:"dept",disabled:!1},{label:"用户",value:"user",disabled:!1}];return h["default"].createElement("div",{className:"business-container pr full-height"},h["default"].createElement("div",{className:"bg-white"},h["default"].createElement(g.VpRow,{gutter:1},h["default"].createElement(g.VpCol,{span:3,className:"text-right p-lr-sm"},h["default"].createElement("h4",{className:"ant-form-item-required"},"导出说明：")),h["default"].createElement(g.VpCol,{span:20,className:"text-left p-lr-sm"},h["default"].createElement("h4",null,"基础配置包括功能权限，导航配置，系统定义，成本定义，指示器，工序定义"))),h["default"].createElement(g.VpRow,{gutter:1},h["default"].createElement(g.VpCol,{span:3,className:"text-right p-lr-sm"},h["default"].createElement("h4",null," ")),h["default"].createElement(g.VpCol,{span:20,className:"text-left p-lr-sm"},h["default"].createElement("h4",null,"授权包括角色组，角色"))),h["default"].createElement(g.VpRow,{gutter:1},h["default"].createElement(g.VpCol,{span:3,className:"text-right p-lr-sm"},h["default"].createElement("h4",null," ")),h["default"].createElement(g.VpCol,{span:20,className:"text-left p-lr-sm"},h["default"].createElement("h4",null,"考核指标包括指标库，考核定义"))),h["default"].createElement(g.VpRow,{gutter:1},h["default"].createElement(g.VpCol,{span:3,className:"text-right p-lr-sm"},h["default"].createElement("h4",null," ")),h["default"].createElement(g.VpCol,{span:20,className:"text-left p-lr-sm"},h["default"].createElement("h4",null,"定时任务包括定时任务，定时计划"))),h["default"].createElement("br",null),h["default"].createElement(g.VpRow,{gutter:1},h["default"].createElement(g.VpCol,{span:3,className:"text-right p-lr-sm"},h["default"].createElement("h4",{className:"ant-form-item-required"},"可选模块：")),h["default"].createElement(g.VpCol,{className:"gutter-row text-left",span:20},h["default"].createElement(g.VpCheckbox,{options:t,disabled:!0,value:this.state.checkedValues,onChange:this.onChange}))),h["default"].createElement("br",null),h["default"].createElement(g.VpRow,{gutter:1},h["default"].createElement(g.VpCol,{span:3,className:"text-right p-lr-sm"},h["default"].createElement("h4",{className:"ant-form-item-required"},"导出模式：")),h["default"].createElement(g.VpCol,{className:"gutter-row text-left",span:20},h["default"].createElement(g.VpRadioGroup,{onChange:this.onexpChange,value:""==this.state.expvalues?"2":this.state.expvalues},h["default"].createElement(g.VpRadio,{key:"1",value:"1"},"全量"),h["default"].createElement(g.VpRadio,{key:"2",value:"2"},"增量"))))),h["default"].createElement("div",{className:"footFixed p-sm b-t text-center",style:{marginBottom:10}},(this.state.disabled,h["default"].createElement(g.VpButton,{className:"vp-btn-br",type:"primary",onClick:function(){return e.wkExport()}},"导出数据"))))}}]),t}(m.Component);t["default"]=v=(0,g.VpFormCreate)(v)}});