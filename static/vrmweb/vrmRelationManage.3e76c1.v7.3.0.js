webpackJsonp([6],{981:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(363),o=l(n),r=a(687),u=l(r),d=a(54),i=l(d),c=a(55),f=l(c),m=a(59),p=l(m),s=a(93),v=l(s),E=a(8),V=l(E),_=a(4);a(982);var h=a(652),g=a(984),y=l(g),C=a(786),S=function(e){function t(e){(0,i["default"])(this,t);var a=(0,p["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.getData=function(){var e=a,t=e.state,l=t.currentPage,n=t.numPerPage,o=t.fromNodeCode;e.setState({spinStatus:!0}),(0,_.vpQuery)("{vpvrm}/vrm/entpModel/listPageRelation",{fromNodeCode:o,currentPage:l,numPerPage:n}).then(function(t){var a=t.data,l=function(){return"共"+a.totalRows+"条"};e.setState({dataSource:a.resultList,cur_page:a.currentPage,total_rows:a.totalRows,num_perpage:a.numPerPage,pagination:{total:a.totalRows,pageSize:parseInt(a.numPerPage),current:a.currentPage,showSizeChanger:!0,showQuickJumper:!0,showTotal:l},spinStatus:!1})})["catch"]({})},a.onCellChange=function(e,t){return function(l){var n=[].concat((0,o["default"])(a.state.dataSource)),r=n.find(function(t){return t.key===e});r&&(r[t]=l,a.setState({dataSource:n}))}},a.onDelete=function(e){var t=[].concat((0,o["default"])(a.state.dataSource));a.setState({dataSource:t.filter(function(t){return t.key!==e})})},a.handleAdd=function(){a.setState({modelVisible:!0})},a.tableChange=function(e,t,l){console.log(e),a.setState({currentPage:e.current||a.state.cur_page,numPerPage:e.pageSize||a.state.numPerPage},function(){a.getData()})},a.handlesearch=function(e){a.setState({fromNodeCode:e},function(){a.getData()})},a.modelHandleOk=function(e){var t=a;a.props.form.validateFields(["fromNodeCode","fromEntityId","toNodeCode","toEntityId","nodeRelType"],function(e,l){e||vpAdd("{vpvrm}/vrm/entpModel/saveRelation",{toNodeCode:l.toNodeCode,toEntityId:l.toEntityId,toEntityCode:l.toNodeCode+"-"+l.toEntityId,fromNodeCode:l.fromNodeCode,fromEntityCode:l.fromNodeCode+"-"+l.fromEntityId,fromEntityId:l.fromEntityId,relType:l.nodeRelType}).then(function(e){t.setState({modelVisible:!1}),a.getTreeData(),C.RestAlertMsg.showSuccess({msg:"添加成功！"})})["catch"](function(e){})})},a.state={tableHeader:[{title:"序号",dataIndex:"row_id",key:"row_id",width:70},{title:"实例名称",dataIndex:"fromname",key:"fromname"},{title:"实例code",dataIndex:"fromcode",key:"fromcode"},{title:"对应关系code",dataIndex:"nodereltype",key:"nodereltype"},{title:"对应实例名称",dataIndex:"toname",key:"toname"},{title:"对应实例code",dataIndex:"tocode",key:"tocode"},{title:"操作",fixed:"operation",width:100,render:function(e,t){var l=t.editable;return V["default"].createElement("div",{className:"editable-row-operations"},l?V["default"].createElement("span",null,V["default"].createElement("a",{onClick:function(){return a.save(t.key)}},"保存"),V["default"].createElement(_.VpPopconfirm,{title:"确定要取消 ?",onConfirm:function(){return a.cancel(t.key)}},V["default"].createElement("a",{style:{marginLeft:10}},"取消"))):V["default"].createElement("a",{onClick:function(){return a.edit(t.key)}},"编辑"),V["default"].createElement(_.VpPopconfirm,{title:"确定要删除 ?",onConfirm:function(){return a.onDelete(t.key)}},V["default"].createElement("a",{href:"#",style:{"float":"right"}},"删除")))}}],dataSource:[],count:1,currentPage:1,numPerPage:10,spinStatus:!1,fromNodeCode:"",modelVisible:!1},a}return(0,v["default"])(t,e),(0,f["default"])(t,[{key:"componentWillMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this;return V["default"].createElement("div",{className:"batch-table"},V["default"].createElement(_.VpRow,{gutter:10},V["default"].createElement(_.VpCol,{className:"gutter-row",span:4},V["default"].createElement(h.SeachInput,{onSearch:this.handlesearch,placeholder:"请输入实体对象code..."})),V["default"].createElement(_.VpCol,{className:"gutter-row",span:12},V["default"].createElement(_.VpTooltip,{placement:"top",title:"新增实体对象之间的关系"},V["default"].createElement(_.VpButton,{type:"primary",className:"editable-add-btn",onClick:this.handleAdd},"新增")))),V["default"].createElement(_.VpSpin,{spinning:this.state.spinStatus},V["default"].createElement(_.VpTable,{ref:function(t){e.table=t},pagination:this.state.pagination,columns:this.state.tableHeader,dataSource:this.state.dataSource,onChange:this.tableChange})),V["default"].createElement(_.VpModal,{title:"新增模型关系",visible:this.state.modelVisible,onOk:this.modelHandleOk,style:{height:"400px"},width:"700px",onCancel:function(){return e.setState({modelVisible:!1})},maskClosable:!0},V["default"].createElement(y["default"],null)))}}]),t}(V["default"].Component);t["default"]=S=(0,_.VpFormCreate)(S)},982:function(e,t,a){var l=a(983);"string"==typeof l&&(l=[[e.id,l,""]]);var n={hmr:!0};n.transform=void 0;a(439)(l,n);l.locals&&(e.exports=l.locals)},983:function(e,t){},984:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(14),o=l(n),r=a(687),u=l(r),d=a(54),i=l(d),c=a(55),f=l(c),m=a(59),p=l(m),s=a(93),v=l(s),E=a(8),V=l(E),_=a(4);a(982);var h=function(e){function t(e){(0,i["default"])(this,t);var a=(0,p["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.state={modelVisible:!1},a}return(0,v["default"])(t,e),(0,f["default"])(t,[{key:"render",value:function(){var e=(this.props.form,this.props.form.getFieldProps),t={labelCol:{span:6},wrapperCol:{span:14}};return V["default"].createElement("div",{className:"full-height"},V["default"].createElement(_.VpForm,{className:"scroll full-height",horizontal:!0},V["default"].createElement(_.VpRow,null,V["default"].createElement(_.VpCol,{span:12},V["default"].createElement(_.VpFSelect,(0,o["default"])({label:"实体对象:"},t),V["default"].createElement(_.VpSelect,(0,o["default"])({defaultValue:"",placeholder:"请选择实体对象"},e("fromNodeCode",{rules:[{required:!0,message:"请选择实体对象"}]})),V["default"].createElement(_.VpOption,{value:"vrm_model_busi_func"},"vrm_model_busi_func"),V["default"].createElement(_.VpOption,{value:"vrm_model_prod_line"},"vrm_model_prod_line"),V["default"].createElement(_.VpOption,{value:"vrm_model_prod_team"},"vrm_model_prod_team"),V["default"].createElement(_.VpOption,{value:"vrm_model_basi_prod"},"vrm_model_basi_prod")))),V["default"].createElement(_.VpCol,{span:12},V["default"].createElement(_.VpFSelect,(0,o["default"])({label:"实例数据:"},t),V["default"].createElement(_.VpSelect,(0,o["default"])({defaultValue:"",placeholder:"请选择实例数据"},e("fromEntityId",{rules:[{required:!0,message:"请选择实例数据"}]})),V["default"].createElement(_.VpOption,{value:"1"},"数据1"),V["default"].createElement(_.VpOption,{value:"2"},"数据2"),V["default"].createElement(_.VpOption,{value:"3"},"数据3"),V["default"].createElement(_.VpOption,{value:"4"},"数据4"),V["default"].createElement(_.VpOption,{value:"5"},"数据5"),V["default"].createElement(_.VpOption,{value:"6"},"数据6"),V["default"].createElement(_.VpOption,{value:"7"},"数据7"),V["default"].createElement(_.VpOption,{value:"8"},"数据8"),V["default"].createElement(_.VpOption,{value:"9"},"数据9"),V["default"].createElement(_.VpOption,{value:"10"},"数据10"))))),V["default"].createElement(_.VpRow,null,V["default"].createElement(_.VpCol,{span:12},V["default"].createElement(_.VpFSelect,(0,o["default"])({label:"实体对象:"},t),V["default"].createElement(_.VpSelect,(0,o["default"])({defaultValue:"",placeholder:"请选择实体对象"},e("toNodeCode",{rules:[{required:!0,message:"请选择实体对象"}]})),V["default"].createElement(_.VpOption,{value:"vrm_model_busi_func"},"vrm_model_busi_func"),V["default"].createElement(_.VpOption,{value:"vrm_model_prod_line"},"vrm_model_prod_line"),V["default"].createElement(_.VpOption,{value:"vrm_model_prod_team"},"vrm_model_prod_team"),V["default"].createElement(_.VpOption,{value:"vrm_model_basi_prod"},"vrm_model_basi_prod")))),V["default"].createElement(_.VpCol,{span:12},V["default"].createElement(_.VpFSelect,(0,o["default"])({label:"实例数据:"},t),V["default"].createElement(_.VpSelect,(0,o["default"])({defaultValue:"",placeholder:"请选择实例数据"},e("toEntityId",{rules:[{required:!0,message:"请选择实例数据"}]})),V["default"].createElement(_.VpOption,{value:"1"},"数据1"),V["default"].createElement(_.VpOption,{value:"2"},"数据2"),V["default"].createElement(_.VpOption,{value:"3"},"数据3"),V["default"].createElement(_.VpOption,{value:"4"},"数据4"),V["default"].createElement(_.VpOption,{value:"5"},"数据5"),V["default"].createElement(_.VpOption,{value:"6"},"数据6"),V["default"].createElement(_.VpOption,{value:"7"},"数据7"),V["default"].createElement(_.VpOption,{value:"8"},"数据8"),V["default"].createElement(_.VpOption,{value:"9"},"数据9"),V["default"].createElement(_.VpOption,{value:"10"},"数据10"))))),V["default"].createElement(_.VpRow,null,V["default"].createElement(_.VpCol,{span:12},V["default"].createElement(_.VpFSelect,(0,o["default"])({label:"关联关系:"},t),V["default"].createElement(_.VpSelect,(0,o["default"])({defaultValue:"",placeholder:"请选择关联关系"},e("nodeRelType",{rules:[{required:!0,message:"请选择关联关系"}]})),V["default"].createElement(_.VpOption,{value:"1"},"1"),V["default"].createElement(_.VpOption,{value:"2"},"2"),V["default"].createElement(_.VpOption,{value:"3"},"3"),V["default"].createElement(_.VpOption,{value:"4"},"4")))))))}}]),t}(V["default"].Component);t["default"]=h=(0,_.VpFormCreate)(h)}});