webpackJsonp([4,19],{969:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(687),r=s(n),l=a(54),i=s(l),o=a(55),u=s(o),d=a(59),c=s(d),f=a(93),h=s(f),p=a(8),v=s(p),m=a(4),g=a(784);a(970);var y=a(972),A=s(y),I=function(e){function t(e){(0,i["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return a.initPanel=function(){a.getTree(function(e){a.firstLoadRightContent(e[0]),a.setState({treeData:e})})},a.firstLoadRightContent=function(e){a.setState({reqAssetId:e.attributes.reqAssetId}),a.getFormData(e.attributes.reqAssetType,e.attributes.iid)},a.reloadTreeAndPanel=function(){a.structTree;a.getTree(function(e){})},a.getTree=function(e){(0,m.vpQuery)(a.getStructTreeUrl).then(function(t){t.data&&e&&e(t.data)})},a.selectTreeNode=function(e,t){var s=(t.selected,t.selectedNodes,t.node),n=(t.event,s.props.item.attributes.reqAssetType),r=s.props.item.attributes.iid;a.setState({reqAssetId:s.props.item.attributes.reqAssetId}),a.getFormData(n,r)},a.loadRightContent=function(e,t){(0,m.vpQuery)(g.entityFormDataUrl,e).then(function(e){t&&t(e.data.form)})},a.getFormData=function(e,t){var s=a;s.getDynamicTabs(t),s.loadRightContent({entityid:e,iid:t},function(e){a.setState({rightContant:e})})},a.clickMenu=function(e){var t=(e.item,e.key);e.keyPath;"1"===t?a.structTree.expandedAll():"2"===t?a.structTree.closeAll():console.log("未知的参数值")},a.state={treeData:[],selectId:[],rightBox_status:!1,assetTypeList:[],levelTableData:[],addLevel_status:!1,assetLevel:"",add_status:!0,assetOptionsData:[],rightContant:"",chooseEntityId:"",params:{},selectNode:"",position:"",isStructAdd:!0,show_status:!1,tabs_array:[],increaseData:[],entityid:196,reqAssetId:""},a.getStructTreeUrl="/{vpvrm}/vrm/assetStruct/tree",a.getDynamicTabs=a.getDynamicTabs.bind(a),a.getFormData=a.getFormData.bind(a),a.firstLoadRightContent=a.firstLoadRightContent.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentWillMount",value:function(){this.initPanel()}},{key:"stopEvent",value:function(e){var t=e;t&&t.stopPropagation?(t.stopPropagation(),t.preventDefault()):window.event&&(t.cancelBubble=!0,t.returnValue=!1)}},{key:"getDynamicTabs",value:function(e){var t=this;(0,m.vpAdd)(g.entityDynamicTabsUrl,{entityid:this.state.entityid,iid:e}).then(function(e){var a=e.data.tabs;t.setState({tabs_array:a})})}},{key:"render",value:function(){var e=this,t=this,a=t.props.form,s=(a.getFieldProps,a.getFieldValue,v["default"].createElement(m.VpMenu,{onClick:t.clickMenu},v["default"].createElement(m.VpMenuItem,{key:"1"},"展开树"),v["default"].createElement(m.VpMenuItem,{key:"2"},"合并树")));return v["default"].createElement("div",{className:"full-height"},v["default"].createElement(m.VpRow,{gutter:10,className:"full-height"},v["default"].createElement(m.VpCol,{span:8,className:"full-height"},v["default"].createElement("div",{className:"bg-white p-sm full-height pr"},v["default"].createElement("div",{className:"struct-title"},v["default"].createElement("div",{style:{"float":"left"}},v["default"].createElement("h3",{className:"struct-title-h3"},"需求资产结构")),v["default"].createElement("div",{style:{"float":"right"}},v["default"].createElement(m.VpDropdown,{trigger:["click"],overlay:s,type:"ghost"},v["default"].createElement(m.VpIcon,{type:"bars"})))),v["default"].createElement("div",{style:{height:"95%"}},v["default"].createElement(m.VpTree,{checkStrictly:!0,hasSearch:!0,textCheck:!0,ref:function(t){return e.structTree=t},treeData:this.state.treeData,onSelect:this.selectTreeNode})))),v["default"].createElement(m.VpCol,{span:16,className:"full-height"},this.state.reqAssetId?v["default"].createElement(A["default"],{reqAssetId:this.state.reqAssetId,showMoreVer:!0}):null)))}}]),t}(v["default"].Component);t["default"]=I=(0,m.VpFormCreate)(I)},970:function(e,t,a){var s=a(971);"string"==typeof s&&(s=[[e.id,s,""]]);var n={hmr:!0};n.transform=void 0;a(439)(s,n);s.locals&&(e.exports=s.locals)},971:function(e,t){},972:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(687),r=s(n),l=a(54),i=s(l),o=a(55),u=s(o),d=a(59),c=s(d),f=a(93),h=s(f),p=a(8),v=s(p),m=a(4);a(973);var g=a(975),y=s(g),A=function(e){function t(e){(0,i["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return a.state={defaultActiveKey:a.props.defaultActiveKey||"0",showMoreVer:a.props.showMoreVer||!1,reqAssetId:a.props.reqAssetId||a.props.params.reqassetid},a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentWillReceiveProps",value:function(e){e.reqAssetId&&this.props.reqAssetId!=e.reqAssetId&&this.setState({reqAssetId:e.reqAssetId})}},{key:"render",value:function(){return v["default"].createElement("div",{className:"asset-workspace full-height"},v["default"].createElement(m.VpTabs,{defaultActiveKey:this.state.defaultActiveKey,destroyInactiveTabPane:!0},v["default"].createElement(m.VpTabPane,{tab:"内容",key:"0",className:"nodata"},v["default"].createElement(y["default"],{reqAssetId:this.state.reqAssetId,showMoreVer:this.state.showMoreVer}))))}}]),t}(v["default"].Component);t["default"]=A},973:function(e,t,a){var s=a(974);"string"==typeof s&&(s=[[e.id,s,""]]);var n={hmr:!0};n.transform=void 0;a(439)(s,n);s.locals&&(e.exports=s.locals)},974:function(e,t){},975:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(14),r=s(n),l=a(687),i=s(l),o=a(54),u=s(o),d=a(55),c=s(d),f=a(59),h=s(f),p=a(93),v=s(p),m=a(8),g=s(m),y=a(4);a(976);var A=function(e){function t(e){(0,u["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e));return a.handleChange=function(e){var t=a;(0,y.vpQuery)("{vpvrm}/vrm/reqAssetView/getContentByCntId",{reqAssetCntntId:e}).then(function(e){t.setState({loading:!1,html:e.data})})},a.state={loading:!0,reqAssetId:a.props.reqAssetId,reqAssetCntntId:"",html:"",defaultKey:"",verDataInfos:""},a.getData=a.getData.bind(a),a.getVerData=a.getVerData.bind(a),a.handleChange=a.handleChange.bind(a),a}return(0,v["default"])(t,e),(0,c["default"])(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.reqAssetId&&this.props.reqAssetId!=e.reqAssetId&&this.setState({reqAssetId:e.reqAssetId},function(){t.getData(),t.getVerData()})}},{key:"componentWillMount",value:function(){this.getData(),this.getVerData()}},{key:"getData",value:function(){var e=this;(0,y.vpQuery)("{vpvrm}/vrm/reqAssetView/getContent",{reqAssetId:this.state.reqAssetId}).then(function(t){e.setState({loading:!1,html:t.data})})}},{key:"getVerData",value:function(){var e=this,t={labelCol:{span:4},wrapperCol:{span:18}};(0,y.vpQuery)("{vpvrm}/vrm/reqAssetView/getVerList",{reqAssetId:e.state.reqAssetId}).then(function(a){var s=void 0,n=a.data.map(function(e,t){return 0==t&&(s=e.reqAssetCntntId),g["default"].createElement(y.VpOption,{value:e.reqAssetCntntId,key:e.reqAssetCntntId},e.reqAssetVer)});e.setState({verDataInfos:g["default"].createElement(y.VpFSelect,(0,r["default"])({label:"版本"},t,{style:{width:"300px"}}),g["default"].createElement(y.VpSelect,{onChange:e.handleChange,style:{width:"200px"},defaultValue:{key:s}},n))})})}},{key:"render",value:function(){this.state.reqAssetCntntId;return g["default"].createElement(y.VpSpin,{spinning:this.state.loading},g["default"].createElement("div",{horizontal:!0},this.state.verDataInfos),g["default"].createElement("div",{dangerouslySetInnerHTML:{__html:this.state.html},className:"full-height bg-white scroll-y"}))}}]),t}(g["default"].Component);t["default"]=A},976:function(e,t,a){var s=a(977);"string"==typeof s&&(s=[[e.id,s,""]]);var n={hmr:!0};n.transform=void 0;a(439)(s,n);s.locals&&(e.exports=s.locals)},977:function(e,t){}});