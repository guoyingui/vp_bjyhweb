webpackJsonp([5],{1525:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var a=e.length-t.length;return a>=0&&e.lastIndexOf(t)==a}function l(){return[{title:"名称",dataIndex:"sname",key:"sname",width:250,fixed:"",render:function(e,t){switch(t.ientityid){case"7":return C["default"].createElement("div",{className:"inline-display"},C["default"].createElement(S.VpTooltip,{title:"项目"},C["default"].createElement(S.VpIconFont,{type:"vpicon-project m-lr-xs text-success"})),e);case"6":return C["default"].createElement("div",{className:"inline-display"},C["default"].createElement(S.VpTooltip,{title:"项目群"},C["default"].createElement(S.VpIconFont,{type:"vpicon-wenben m-lr-xs text-primary"})),e);case"8":return C["default"].createElement("div",{className:"inline-display"},C["default"].createElement(S.VpTooltip,{title:"子项目"},C["default"].createElement(S.VpIconFont,{type:"vpicon-file-text m-lr-xs text-info"})),e);case"114":return C["default"].createElement("div",{className:"inline-display"},C["default"].createElement(S.VpTooltip,{title:"任务"},C["default"].createElement(S.VpIconFont,{type:"vpicon-file-zip m-lr-xs text-warning"})),e);default:return C["default"].createElement("div",{className:"inline-display"},e)}}},{title:"编号",dataIndex:"scode",key:"scode",width:"",fixed:""},{title:"类别",dataIndex:"iclassid",key:"iclassid",width:"",fixed:""},{title:"状态",dataIndex:"istatusid",key:"istatusid",width:"",fixed:""},{title:"归属部门",dataIndex:"idepartmentid",key:"idepartmentid",width:"",fixed:""},{title:"上级项目群组",dataIndex:"iparent",key:"iparent",width:"",fixed:""},{title:"负责人",dataIndex:"inamerole",key:"inamerole",width:"",fixed:""}]}Object.defineProperty(t,"__esModule",{value:!0});var s=a(363),r=i(s),o=a(965),d=i(o),c=a(14),u=i(c),p=a(984),f=i(p),y=a(852),m=i(y),h=a(54),v=i(h),b=a(55),g=i(b),k=a(59),w=i(k),x=a(93),E=i(x),V=a(8),C=i(V),S=a(4),T=a(891);a(1526);var R=a(981),_=a(1511),F=i(_),N=a(816),D=((0,R.requireFile)("vfm/DynamicForm/dynamic"),(0,R.requireFile)("vfm/Document/documentList")),I=function(e){function t(e){(0,v["default"])(this,t);var a=(0,w["default"])(this,(t.__proto__||(0,m["default"])(t)).call(this,e));return a.getProjectTags=function(){7==a.state.entityid&&(0,S.vpQuery)("/{bjyh}/util/getFiledDictionaryList",{entityid:a.state.entityid,fieldname:"ixmbq"}).then(function(e){if(e.data){var t=[],i=!0,n=!1,l=undefined;try{for(var s,r=(0,f["default"])(e.data);!(i=(s=r.next()).done);i=!0){var o=s.value;t.push(C["default"].createElement(S.VpOption,{key:o.ivalue,value:o.ivalue},o.stext))}}catch(d){n=!0,l=d}finally{try{!i&&r["return"]&&r["return"]()}finally{if(n)throw l}}a.setState({vpOptionList:t})}})},a.queryclassList=function(){(0,S.vpQuery)("/{vpplat}/vfrm/tasks/classList",{entityid:a.state.entityid}).then(function(e){var t=e.data;if(a.setState({classList:t}),2==a.state.entityid&&1==t.length){var i=t[0].scode,n=t[0].iid;a.setState({viewcode:i,currentclassid:n})}})},a.loadDocType=function(){(0,S.vpQuery)("/{vpplat}/vfrm/entity/doctype",{entityid:a.state.entityid}).then(function(e){a.setState({doctypelist:e.data,selectType:e.data[0].value})})},a.queryEntityType=function(){(0,S.vpQuery)("/{vpplat}/vfrm/entity/entitytype",{entityid:a.state.entityid}).then(function(e){a.setState({entitytype:e.data.entitytype})})},a.querySearchFormData=function(){(0,S.vpQuery)("/{vpplat}/vfrm/entity/searchForm",{entityid:a.state.entityid,scode:"search"}).then(function(e){a.setState({SearchFormData:e.data.form})})},a.chooseModalVisible=function(e){a.chooseVisible=e},a.getEditHeader=function(){var e=a,t={entityid:e.state.entityid,viewcode:"initeditlist"};(0,S.vpQuery)("/{vpplat}/vfrm/entity/initEditGrids",(0,u["default"])({},t)).then(function(t){if(t&&t.hasOwnProperty("data")){var a=[],i=t.data.fields;if(0==i.length)return(0,S.VpAlertMsg)({message:"消息提示",description:"未查询到编辑列表视图！",type:"error",onClose:this.onClose,closeText:"关闭",showIcon:!0},5),void e.setState({table_headers:[]});i.length;i.map(function(t,i){var n=void 0,l=void 0,s=void 0,r=void 0;for(var o in t)"field_label"==o?n=t[o]:"field_name"==o&&(l=t[o]),"fixed"==o&&(r=t[o]),"iwidth"==o&&(s=t[o]);n&&l&&("left"==r||"right"==r?a.push({title:n,dataIndex:l,key:l,width:s,fixed:r}):a.push({title:n,dataIndex:l,width:s,key:l,fixed:r,render:t.edit_col?function(a,i){return C["default"].createElement(N.EditTableCol,{callBack:e.callBack,record:i,widget:t.widget,item:(0,u["default"])({},t.widget,{irelationentityid:t.irelationentityid}),value:a})}:null}))}),a.push({title:"操作",fixed:"right",width:function(){return vp.config.vpplat!=undefined&&vp.config.vpplat.operation!=undefined&&vp.config.vpplat.operation!=undefined&&vp.config.vpplat.operation.width!=undefined?vp.config.vpplat.operation.width:100},key:"operation",render:function(t,a){return C["default"].createElement("span",null,C["default"].createElement(S.VpTooltip,{placement:"top",title:"附件"},C["default"].createElement(S.VpIconFont,{onClick:function(){return e.openupload(a)},className:"text-primary m-lr-xs cursor",type:"vpicon-paperclip"})),"0"!=a.istatusflag||!e.state.entityaddrole||"0"==a.principal&&"2"!=e.state.entityid?null:C["default"].createElement(S.VpTooltip,{placement:"top",title:"删除"},C["default"].createElement(S.VpPopconfirm,{title:"确定要删除这条信息吗？",onConfirm:function(){return e.confirm(a.ientityid,a.iid)},onCancel:e.cancel},C["default"].createElement(S.VpIconFont,{className:"cursor m-lr-xs text-danger",type:"vpicon-shanchu"}))),a.iid>0?C["default"].createElement(S.VpTooltip,{placement:"top",title:"查看详情"},C["default"].createElement(S.VpIconFont,{onClick:function(){return e.onRowClick(a,"")},className:"text-primary m-lr-xs cursor",type:"vpicon-navopen"})):null)}}),e.setState({table_headers:a,tableloading:!1})}})["catch"](function(t){e.setState({tableloading:!1})})},a.openupload=function(e){var t=e.iid;a.state.editrowdata[t]=e,a.setState({VpUploader:!0,currentiid:e.iid,editrowdata:a.state.editrowdata})},a.callBack=function(e){var t=e.iid;a.state.editrowdata[t]=e,a.setState({editrowdata:a.state.editrowdata})},a.handleEditAdd=function(){a.tableRef.addTableRow({iid:a.objectid--});var e=vp.computedHeight(1);a.setState({tableHeight:e})},a.handleEditSave=function(){var e=a.state.editrowdata;if($.isEmptyObject(e))return void(0,S.VpAlertMsg)({message:"消息提示",description:"暂无可保存的数据！",type:"error",onClose:a.onClose,closeText:"关闭",showIcon:!0},5);var t=[];for(var i in e)if(e.hasOwnProperty(i)){var l=e[i];delete l.undefined,delete l.className;var s=a.state.filearr[l.iid];""!=s&&s!=undefined&&(l.fileinfo=s);for(var r in l)if(n(r,"val")){var o=r.replace("val","");l[o]=l[r]}l.iid=l.iid>0?l.iid:"",t.push(l)}(0,S.vpAdd)("/{vpplat}/vfrm/entity/saveEditData",{entityid:a.state.entityid,editData:(0,d["default"])(t)}).then(function(e){a.tableRef.getTableData(),a.setState({editrowdata:{},filearr:{}})})},a.handleReload=function(){a.setState({tableloading:!0}),a.tableRef.getTableData()},a.getOptionList=function(e){var t=[];return"6"!=e.ientityid&&"7"!=e.ientityid||t.push({key:"summary",sname:"计算汇总",classname:"cursor m-r-xs f16 text-primary",type:"vpicon-see-o"}),"7"==e.ientityid&&t.push({key:"weekreport",sname:"生成周报",classname:"cursor m-r-xs f16 text-primary",type:"vpicon-progress"}),e.action&&e.action.map(function(e,a){t.push({key:e.skey,sname:"item.sname",classname:"cursor m-r-xs f16 text-primary",type:"item.icontype"})}),t},a.getconfig=function(){var e=a;(0,S.vpQuery)("/{vpplat}/vfrm/entity/getConfig",{entityid:e.state.entityid}).then(function(t){if(t.hasOwnProperty("data")){if(t.data.hasOwnProperty("search")){var a=t.data.lastview;a=""==a||a==undefined?"0":a;var i=t.data.search.filters;t.data.search.myfilters&&t.data.search.myfilters[0].children.map(function(e,a){"有红灯的"===e.name&&t.data.search.myfilters[0].children.splice(a,1)});var n={filters:i,statusFilters:t.data.search.statusFilters||[],classFilters:t.data.search.classFilters||[],myfilters:t.data.search.myfilters||[]};if(e.props.location==undefined||e.props.location.state.param==undefined||e.props.location.state.param.filter==undefined)n.filtervalue=a,n.currentkey="filter0",n.openKeys=["filter0"];else{var l=e.props.location.state.param;n.filtervalue=l.filter,n.currentkey=l.currentkey,n.openKeys=[l.currentkey]}e.setState(n)}t.data.hasOwnProperty("toolbar")&&t.data.hasOwnProperty("entityrole")&&e.setState({entityaddrole:t.data.entityrole})}})},a.sorter=function(e,t){},a.barEvent=function(e,t,i,n,l){"summary"==e?(a.setState({isClickMenu:!0}),(0,S.vpAdd)("/{vpplat}/vfrm/entity/summary",{entityid:i,iid:n}).then(function(e){a.setState({isClickMenu:!1}),(0,S.VpAlertMsg)({message:"消息提示",description:"计算汇总成功!",type:"success",onClose:a.onClose,closeText:"关闭",showIcon:!0},5)})):"weekreport"==e?(a.setState({isClickMenu:!0}),(0,S.vpQuery)("/{vpmprovider}/weekport/addweekreport",{projectid:n,startdate:"",enddate:""}).then(function(e){a.setState({isClickMenu:!1}),(0,S.VpAlertMsg)({message:"消息提示",description:"生成周报成功!",type:"success",onClose:a.onClose,closeText:"关闭",showIcon:!0},5)})):"delete"==e?a.confirm(i,n):"discuss"==e?a.discuss(t,i,n):"collect"==e?a.handleLike(t,i,n,l):("7"==i&&"pjtree"==a.state.viewtype&&(n=n.substr(0,n.length-1)),a.jumpTabs(e,i,n))},a.menuClick=function(e,t,i,n){a.barEvent(e.key,e,t,i,n)},a.discuss=function(e,t,i){try{e.stopPropagation()}catch(e){}var n="entity"+t+"_discuss";a.jumpTabs(n,t,i)},a.document=function(e,t,i){try{e.stopPropagation()}catch(e){}var n="entity"+t+"_file";a.jumpTabs(n,t,i)},a.jumpTabs=function(e,t,i){a.getDynamicTabs(!0,t,i),a.setState({defaultActiveKey:e+"tab",activeKey:e+"tab",showRightBox:!0,entityiid:i,row_entityid:t,row_id:i})},a.documentList=function(e,t,i){try{e.stopPropagation()}catch(e){}var n="entity"+t+"_doclist";a.jumpDocListTabs(n,t,i)},a.jumpDocListTabs=function(e,t,i){a.getDynamicTabs(!0,t,i),(0,S.vpQuery)("/{vpmprovider}/project/getProjectBySub",{subiid:i}).then(function(n){a.setState({defaultActiveKey:e+"tab",activeKey:e+"tab",showRightBox:!0,subItemProjectId:n.data.iprojectid,entityiid:i,row_entityid:t,row_id:i})})},a.getExpandedRowa=function(e,t){var i=a,n=t;if(e.length){var l=[];e.map(function(e){n.push(e.key),e.hasOwnProperty("children")&&(l=i.getExpandedRowa(e.children,n),l.map(function(e){-1==n.findIndex(function(t){return e===t})&&n.push(e)}))})}return n},a.handleSearchForm=function(e){a.setState({searchData:e,s_visible:!1})},a.confirm=function(e,t){var i=a;(0,S.vpAdd)("/{bjyh}/deleteFlowCheck/Check",{iid:t,entityid:e}).then(function(e){e.flag?i.tableRef.getTableData():(0,S.VpAlertMsg)({message:"消息提示",description:e.msg,type:"info",closeText:"关闭",showIcon:!0},5)})},a.formevent=function(e,t,i){(0,S.vpQuery)("/{vpplat}/vfrm/entity/getformevent",{entityid:e,iid:t,viewtype:i}).then(function(e){a.setState({eventmap:e.data})})},a.queryentityRole=function(e,t){(0,S.vpQuery)("/{vpplat}/vfrm/entity/entityRole",{entityid:e,iid:t}).then(function(e){a.setState({entityrole:e.data.entityRole})})},a.handleStatus=function(e,t,a){},a.uploadSuccess=function(e,t){(0,S.VpAlertMsg)({message:"消息提示",description:"导入成功！",type:"success",onClose:a.onClose,closeText:"关闭",showIcon:!0},5),a.setState({entityVisible:!1},function(){return a.tableRef.getTableData()})},a.uploadClick=function(){a.inputUploader.upload.on("beforeFileQueued",function(e){a.props.form.setFieldsValue({xls_label:e.name})})},a.inputUploaderChange=function(e){},a.cancelSearch=function(){a.setState({s_visible:!1})},a.handleLike=function(e,t,i,n){try{e.stopPropagation()}catch(e){}(0,S.vpAdd)("/{vpplat}/vfrm/entity/handleLike",{ientityid:t,iid:i,record:(0,d["default"])(n)}).then(function(e){a.tableRef.getTableData()})},a.shrinkLeft=function(e){a.setState({shrinkShow:!a.state.shrinkShow})},a.handleClick=function(e){var t=e.key,i=e.keyPath.slice(1),n=e.keyPath.slice(1)[0];a.state.filtervalue==t&&a.state.currentkey==n||a.setState({filtervalue:t,openKeys:i,currentkey:n,tableloading:!0})},a.onToggle=function(e){a.setState({openKeys:e.open?e.keyPath:e.keyPath.slice(1)})},a.handleViewChange=function(e){a.setState({view:e.target.value,viewtype:e.target.value},function(){a.getHeader()})},a.queryentityList=function(){(0,S.vpQuery)("/{vpplat}/vfrm/entity/entityList",{}).then(function(e){a.setState({entityList:e.data})})},a.onRef=function(e){a.child=e},a.handleNewClick=function(e){a.queryentityRole(e.key,""),a.setState({showRightBox:!0,add:!0,entityiid:"",statusList:[],entityid:e.key,defaultActiveKey:"0"})},a.controlAddButton=function(e,t){var i=vp.computedHeight(t.length,".entityTable");"resource"==a.props.fromtype&&(i-=50);var n=a.getExpandedRowa(t,[]);a.setState({tableloading:!1,expandedRowKeys:n,tableHeight:i})},a.onUploadAccept=function(e,t){var i=a,n={fileid:t.data.fileid,doctype:t.data.doctype};i.state.filearr[i.state.currentiid]!=undefined&&null!=i.state.filearr[i.state.currentiid]?i.state.filearr[i.state.currentiid]=[].concat((0,r["default"])(i.state.filearr[i.state.currentiid]),[n]):i.state.filearr[i.state.currentiid]=[n],a.setState({filearr:i.state.filearr})},a.handleFileCancel=function(){a.setState({VpUploader:!1})},a.handleNewFormClick=function(e){var t=e.key.split(",")[1],i=e.key.split(",")[0],n=e.domEvent.currentTarget.innerText;a.formevent(a.state.entityid,"",t),(0,S.vpQuery)("/{vpplat}/vfrm/entity/newformurl",{entityid:a.state.entityid}).then(function(e){var l=e.data;a.setState({showRightBox:!0,row_entityid:a.state.entityid,row_id:"",add:!0,entityiid:"",statusList:[],defaultActiveKey:"0",activeKey:"0",viewcode:t,currentclassid:i,formurl:l,currentclassname:n})})},a.onChange_ixmbq=function(e){a.setState({ixmbqValue:e.join()})},a.state={filters:[],visible:!1,showRightBox:!1,table_headers:[],table_array:[],filtervalue:"0",quickvalue:"",increaseData:[],tabs_array:[],filterDropdownVisible:!1,isAdd:!1,entityid:"",iids:"",row_id:"",row_entityid:"",entityiid:"",add:!0,statusList:[],formvalue:{},varilsForm:{},viewtype:"",entityrole:!1,exShow:!1,exList:[],entityVisible:!1,toolbar:{},rowbar:[],SearchFormData:{},searchData:[],loading:!1,expandedRowKeys:[],tableHeight:"",tips:"",defaultActiveKey:"0",activeKey:"0",shrinkShow:!0,openKeys:["filter0"],view:"list",entityList:[],statusFilters:[],classFilters:[],myfilters:[],currentkey:null,scode:"",sname:"",subItemProjectId:"",entitytype:!1,spinning:!1,editrowdata:{},tableloading:!0,VpUploader:!1,filearr:{},doctypelist:[],selectType:"",isClickMenu:!1,classList:[],functionid:"",searchkey:1,isaddflag:0,isdeleteflag:0},a.objectid=0,a.closeRightModal=a.closeRightModal.bind(a),a.handleOk=a.handleOk.bind(a),a.handlesearch=a.handlesearch.bind(a),a.handleVisibleChange=a.handleVisibleChange.bind(a),a.onRowClick=a.onRowClick.bind(a),a.dropVisbleChange=a.dropVisbleChange.bind(a),a.getHeader=a.getHeader.bind(a),a.addNewDom=a.addNewDom.bind(a),a.getDynamicTabs=a.getDynamicTabs.bind(a),a.cancelModal=a.cancelModal.bind(a),a.exTypeData=a.exTypeData.bind(a),a.handleMenuClick=a.handleMenuClick.bind(a),a.onExpand=a.onExpand.bind(a),a.handleDropDown=a.handleDropDown.bind(a),a}return(0,E["default"])(t,e),(0,g["default"])(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.params){if(e.params.entityid!=this.props.params.entityid||e.params.isFat!=this.props.params.isFat){var a=undefined;this.tableRef.state.sortfield="",this.tableRef.state.sorttype="",this.tableRef.state.sorterObj=undefined,this.tableRef.refs.vpTable.state.sortColumn=null,this.tableRef.refs.vpTable.state.sortOrder="",this.setState({entityid:e.params.entityid,showRightBox:!1,viewtype:e.params.type,functionid:e.params.functionid,tabs_array:[],quickvalue:"",currentclassname:"",searchkey:++this.state.searchkey,searchData:a,currentkey:null,ixmbqValue:""},function(){t.getHeader(),t.querySearchFormData(),t.queryentityList(),t.queryEntityType(),t.queryclassList(),t.handleSearchForm(),t.getconfig(),t.child&&t.child.clearSearch()})}e.params.type!=this.props.params.type&&this.setState({viewtype:e.params.type,showRightBox:!1,tabs_array:[],quickvalue:"",currentclassname:"",searchkey:++this.state.searchkey},function(){t.getHeader(),t.querySearchFormData(),t.queryentityList(),t.queryEntityType(),t.getconfig(),t.queryclassList(),t.handleSearchForm()})}else this.setState({viewtype:e.viewtype,entityid:e.entityid,toolbar:e.toolbar,rowbar:e.rowbar,showRightBox:!1,functionid:e.functionid,tabs_array:[],quickvalue:"",currentclassname:"",searchkey:++this.state.searchkey},function(){t.getHeader(),t.queryEntityType(),t.getconfig(),t.queryclassList()})}},{key:"componentWillMount",value:function(){var e=this;this.setState({entityid:this.props.params?this.props.params.entityid:this.props.entityid,viewtype:this.props.params?this.props.params.type:this.props.type,toolbar:this.props.toolbar,rowbar:this.props.rowbar,functionid:this.props.params?this.props.params.functionid:""},function(){e.getHeader(),e.exTypeData(),e.querySearchFormData(),e.queryentityList(),e.queryEntityType(),e.loadDocType(),e.queryclassList(),e.handleSearchForm(),e.getconfig(),e.getProjectTags()})}},{key:"componentDidMount",value:function(){$(".search").find("input").attr("maxlength",400),$(".ant-tabs-nav-scroll .ant-tabs-nav").width()<$(".ant-tabs-content").width()&&($(".ant-tabs-nav-container").removeClass("ant-tabs-nav-container-scrolling"),$(".ant-tabs-tab-prev").hide(),$(".ant-tabs-tab-next").hide())}},{key:"componentDidUpdate",value:function(){$(".ixmbqSelect .ant-select-selection__rendered").css({"line-height":"28px","max-height":"28px",overflow:"auto"})}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"getHeader",value:function(){this.setState({tableloading:!0});var e=this;if("edit"==e.state.viewtype)return void this.getEditHeader();(0,S.vpQuery)("/{vpplat}/vfrm/entity/getheaders",{entityid:e.state.entityid}).then(function(t){if(t&&t.hasOwnProperty("data")){var a=t.data.delflag==undefined?0:t.data.delflag;if(e.setState({loading:!1,isdeleteflag:a,isaddflag:t.data.addflag==undefined?0:t.data.addflag}),t.data.hasOwnProperty("grid")){var i=[];if(t.data.grid.hasOwnProperty("fields")){t.data.grid.fields.map(function(e,t){var a=void 0,n=void 0,l=void 0,s=void 0,r=void 0;for(var o in e)"field_label"==o?a=e[o]:"field_name"==o&&(n=e[o]),"fixed"==o&&(s=e[o]),"iwidth"==o&&(l=e[o]),"datatype"==o&&(r=e[o]);a&&n&&("left"==s||"right"==s?i.push({title:a,dataIndex:n,key:n,width:l,fixed:s}):i.push({title:a,dataIndex:n,key:n,fixed:s,width:l,sorter:"inamerole"!=n&&"irolegroupid"!=n&&"icreator"!=n&&"14"!=r}))}),"pjtree"==e.state.view&&(i=l());var n=i;e.state.entityid;n.map(function(e,t){if("icontrolmode"==e.key){var a=C["default"].createElement("div",{className:"inline-display"},"管控模式");e.title=a,e.render=function(e,t){return C["default"].createElement("div",{className:"indic-wrapper"},"2"==t.icontroltype?C["default"].createElement(S.VpTag,{color:"blue",className:"vp-btn-br p-lr-lg"},t.icontrolmode):C["default"].createElement(S.VpTag,{color:"yellow",className:"vp-btn-br p-lr-lg"},t.icontrolmode))}}else if("istatusid"==e.key)e.render=function(e,t){return C["default"].createElement("div",{className:"indic-wrapper"},e)};else if("iclassid"==e.key)e.render=function(e,t){return C["default"].createElement("div",{className:"indic-wrapper"},e)};else if("scurrentphase"==e.key)e.render=function(e,t){return C["default"].createElement("div",{className:"indic-wrapper"},""!=e?C["default"].createElement(S.VpTag,{color:"1"==t.phasetype?"green":"gray",className:"vp-btn-br p-lr-lg"},e):null)};else if("iactualcomplete"==e.key){var i=["","active","exception"];e.render=function(e,t){return C["default"].createElement("div",null,C["default"].createElement(S.VpProgress,{percent:""==t.iactualcomplete?"0":t.iactualcomplete,status:i[t.ischeduleindicator],strokeWidth:10}))}}}),n.push({title:"操作",fixed:"right",width:100,key:"operation",render:function(t,i){var n=[],l=!1;l=!("0"!=i.istatusflag||!e.state.entityaddrole||"0"==i.principal&&"2"!=e.state.entityid),vp.config.vpplat!=undefined&&vp.config.vpplat.operation!=undefined&&vp.config.vpplat.operation.oprlist!=undefined&&vp.config.vpplat.operation.oprlist.map(function(e,t){if("collect"==e.key){var s=e.sname==undefined?"关注":e.sname;n.push({key:"collect",sname:0==i.ilike?s:"取消"+s,classname:"text-primary m-lr-xs cursor",type:1==i.ilike?"vpicon-star":"vpicon-star-o"})}else if("discuss"==e.key){var r=e.sname==undefined?"评论":e.sname;n.push({key:"discuss",sname:r,classname:"text-primary m-lr-xs cursor",type:"vpicon-pinglun"})}else if("delete"==e.key&&1==l&&"1"==a){var o=e.sname==undefined?"删除":e.sname;n.push({key:"delete",sname:o,classname:"cursor m-r-xs f16 text-danger",type:"vpicon-shanchu"})}}),0==n.length&&(n.push({key:"collect",sname:0==i.ilike?"关注":"取消关注",classname:"text-primary m-lr-xs cursor",type:1==i.ilike?"vpicon-star":"vpicon-star-o"}),n.push({key:"discuss",sname:"评论",classname:"text-primary m-lr-xs cursor",type:"vpicon-pinglun"}),1==l&&"1"==a&&n.push({key:"delete",sname:"删除",classname:"cursor m-r-xs f16 text-danger",type:"vpicon-shanchu"})),e.getOptionList(i).map(function(e,t){n.push(e)});var s=[],r=vp.config.vpplat!=undefined&&vp.config.vpplat.operation!=undefined&&vp.config.vpplat.operation.count!=undefined?vp.config.vpplat.operation.count:2;return C["default"].createElement("span",null,n.map(function(t,n){if(n<r)return"delete"==t.key&&"1"==a?C["default"].createElement(S.VpTooltip,{placement:"top",title:"删除"},C["default"].createElement(S.VpPopconfirm,{title:"确定要删除吗？",onConfirm:function(){return e.confirm(i.ientityid,i.iid)}},C["default"].createElement(S.VpIconFont,{onClick:function(e){e.stopPropagation()},className:t.classname,type:t.type}))):C["default"].createElement(S.VpTooltip,{placement:"top",title:t.sname},C["default"].createElement(S.VpIconFont,{onClick:function(a){return e.barEvent(t.key,a,i.ientityid,i.iid,i)},className:t.classname,type:t.type}));s.push(t)}),s.length>0?C["default"].createElement(S.VpTooltip,{placement:"top",title:"更多"},e.state.isClickMenu?null:C["default"].createElement(S.VpDropdown,{overlay:C["default"].createElement(S.VpMenu,{onClick:function(t){return e.menuClick(t,i.ientityid,i.iid)}},s.map(function(e,t){return C["default"].createElement(S.VpMenuItem,{key:e.key},C["default"].createElement(S.VpIconFont,{className:e.classname,type:e.type}),e.sname)})),trigger:["click"],getPopupContainer:function(){return document.body}},C["default"].createElement(S.VpIconFont,{"data-id":i.iid,className:"cursor m-lr-xs f16",type:"vpicon-wait-x",onClick:function(e){return e.stopPropagation()}}))):null)}}),e.setState({table_headers:n,tableloading:!1})}}}})["catch"](function(e){})}},{key:"onExpand",value:function(e,t){if(e)this.setState({expandedRowKeys:[].concat((0,r["default"])(this.state.expandedRowKeys),[t.key])});else{var a=this.state.expandedRowKeys.findIndex(function(e){return t.key===e});this.setState({expandedRowKeys:[].concat((0,r["default"])(this.state.expandedRowKeys.slice(0,a)),(0,r["default"])(this.state.expandedRowKeys.slice(a+1)))})}}},{key:"handleDropDown",value:function(e){try{e.stopPropagation()}catch(e){}}},{key:"exTypeData",value:function(){var e=this;(0,S.vpQuery)("/{vpplat}/vfrm/entity/exListType",{entityid:this.state.entityid}).then(function(t){e.setState({exList:t.data})})}},{key:"getDynamicTabs",value:function(e,t,a){var i=this;e?setTimeout(function(){(0,S.vpAdd)("/{vpplat}/vfrm/entity/dynamicTabs",{entityid:"pjtree"==i.state.viewtype?t:i.state.entityid,iid:a,functionid:i.state.functionid}).then(function(e){var t=e.data.tabs;i.setState({tabs_array:t},function(){$(".ant-tabs-nav-scroll .ant-tabs-nav").width()<$(".ant-tabs-content").width()&&($(".ant-tabs-nav-container").removeClass("ant-tabs-nav-container-scrolling"),$(".ant-tabs-tab-prev").hide(),$(".ant-tabs-tab-next").hide())})})},200):this.setState({tabs_array:[]})}},{key:"dropVisbleChange",value:function(e){this.setState({filterDropdownVisible:e})}},{key:"handlesearch",value:function(e){var t=$.trim(e);t!=this.state.quickvalue&&this.setState({quickvalue:t,tableloading:!0})}},{key:"onShowSizeChange",value:function(e){}},{key:"showModal",value:function(e){e.target.dataset.id;this.setState({showRightBox:!0,isAdd:!1})}},{key:"closeRightModal",value:function(){var e=this;this.setState({showRightBox:!1,tabs_array:[],add:!1,currentclassname:""},function(){e.tableRef.getTableData()}),this.props.setBreadCrumb()}},{key:"addNewAttr",value:function(e){var t=this,a="",i="",n=this.state.classList;1==n.length&&(a=n[0].scode,i=n[0].iid),this.formevent(this.state.entityid,"",a),(0,S.vpQuery)("/{vpplat}/vfrm/entity/newformurl",{entityid:this.state.entityid}).then(function(e){var n=e.data;t.setState({showRightBox:!0,add:!0,entityiid:"",statusList:[],defaultActiveKey:"0",activeKey:"0",viewcode:a,currentclassid:i,formurl:n,currentclassname:$(".ant-breadcrumb>span:last>span>a>span").text()})})}},{key:"addNewAttrparam",value:function(e){var t=e.record.iid;this.setState({showRightBox:!0,add:!0,entityiid:"",row_id:t,statusList:[]})}},{key:"handleStatusCancel",value:function(){this.setState({visible:!1,entityVisible:!1,varilsForm:{}})}},{key:"cancelModal",value:function(){this.setState({visible:!1,entityVisible:!1,varilsForm:{}})}},{key:"handleOk",value:function(){this.setState({showRightBox:!1}),this.saveRowData(this.props.form.getFieldsValue())}},{key:"handleVisibleChange",value:function(){if(!this.chooseVisible){var e=this.state.SearchFormData;e&&e.groups.length>0?this.setState({s_visible:!this.state.s_visible}):(0,S.VpAlertMsg)({message:"消息提示",description:"暂无可搜索项，请配置搜索表单！",type:"error",onClose:this.onClose,closeText:"关闭",showIcon:!0},5)}}},{key:"onRowClick",value:function(e,t){var a=this,i=e.iid,n=e.sname,l=e.scode,s=e.ientityid;"7"!=s&&"8"!=s||"pjtree"!=this.state.viewtype||(i=i.substr(0,i.length-1)),(0,S.vpQuery)("/{vpplat}/vfrm/entity/EntityCaseExists",{entityid:s,iid:i}).then(function(t){t.data?(a.setState({showRightBox:!0,subItemProjectId:e.iprojectid,add:!1,entityiid:i,row_entityid:s,row_id:i,s_visible:!1,defaultActiveKey:"entity7_generaltab",activeKey:"entity7_generaltab",sname:n,scode:l},function(){a.getDynamicTabs(!0,s,i),a.formevent(s,i,"")}),a.props.setBreadCrumb(n)):((0,S.VpAlertMsg)({message:"消息提示",description:"该数据已经被删除！",type:"error",closeText:"关闭",showIcon:!0},5),a.tableRef.getTableData())})}},{key:"goToActive",value:function(e){e&&e!=undefined&&null!=e&&this.setState({activeKey:e+""})}},{key:"onTabClick",value:function(e){this.setState({activeKey:e+""})}},{key:"onSaveSuccessReload",value:function(e,t){var a=this;if("ok"===t){(0,S.vpQuery)("/{vpplat}/api/all/listData",{entityid:this.state.entityid,fields:"scode,sname",quickSearch:"",condition:(0,d["default"])([{field_name:"iid",field_value:e.data.iid,expression:"eq"}])}).then(function(t){var i=t.data[0];i.iid=e.data.iid,i.ientityid=a.state.entityid,a.onRowClick(i,0)})}}},{key:"addNewDom",value:function(){var e=this,t={iid:this.state.entityiid,entityrole:this.state.entityrole,data:{currentclassid:this.state.currentclassid,viewcode:this.state.viewcode}},a=this.state.formurl;""!=a&&a!=undefined||(a="vfm/DynamicForm/dynamic");var i=(0,R.requireFile)(a)||T.NotFind;return C["default"].createElement(S.VpTabs,{defaultActiveKey:this.state.defaultActiveKey,activeKey:this.state.activeKey,onTabClick:this.onTabClick.bind(this),destroyInactiveTabPane:!0},this.state.tabs_array.length?this.state.tabs_array.map(function(a,i){if(a.staburl){if("1"==a.ilinktype)return C["default"].createElement(S.VpTabPane,{tab:a.sname,key:a.skey+"tab"},C["default"].createElement(S.VpIframe,{url:a.staburl+"?entityid="+e.state.entityid+"&iid="+e.state.entityiid}));var n=a.staburl.split("?"),l=n[0],s="";n.length>1&&(s=n[1]);if(a.skey!="entity"+e.state.entityid+"_doclist"){var r=(0,R.requireFile)(l)||T.NotFind;return C["default"].createElement(S.VpTabPane,{tab:a.sname,key:a.skey==undefined?i:a.skey+"tab"},C["default"].createElement(r,{setBreadCrumb:function(t){return e.props.setBreadCrumb(t)},entitytype:e.state.entitytype,eventmap:e.state.eventmap,add:!1,bindThis:e,entityname:e.state.sname,params:t,closeRightModal:function(){return e.closeRightModal()},refreshList:function(){return e.tableRef.getTableData()},entityid:e.state.entityid,iid:e.state.entityiid,irelationid:a.iid,imainentity:a.imainentity,irelationentity:a.irelationentity,row_entityid:e.state.row_entityid,skey:a.skey,issubitem:a.issubitem,row_id:e.state.row_id,viewtype:e.state.viewtype,iaccesslevel:a.iaccesslevel,entityrole:"1"==a.iaccesslevel,stabparam:s,doctype:"3",goToActive:e.goToActive.bind(e),tabsArray:e.state.tabs_array}))}(0,R.requireFile)(l);return C["default"].createElement(S.VpTabPane,{tab:a.sname,key:a.skey==undefined?i:a.skey+"tab"},C["default"].createElement(D,{doctype:"3",iaccesslevel:a.iaccesslevel,entityrole:"1"==a.iaccesslevel,irelentityid:e.state.row_entityid,irelobjectid:e.state.row_id,mainentityid:"7",mainiid:e.state.subItemProjectId}))}return C["default"].createElement(S.VpTabPane,{tab:a.sname,key:i+"tabs"})}):C["default"].createElement(S.VpTabPane,{tab:"属性",key:"0"},this.state.add?C["default"].createElement(i,{setBreadCrumb:function(t){return e.props.setBreadCrumb(t+e.state.currentclassname)},params:t,entitytype:this.state.entitytype,eventmap:this.state.eventmap,add:!0,bindThis:this,entityrole:!0,onSaveSuccessReload:this.onSaveSuccessReload,closeRightModal:function(){return e.closeRightModal()},refreshList:function(){return e.tableRef.getTableData()},row_id:"",row_entityid:this.state.entityid}):""))}},{key:"handleMenuClick",value:function(e){var t=e.item.props.type;e.key;if(5==t)this.setState({entityVisible:!0});else{var a=this.state.searchData?[].concat((0,r["default"])(this.state.searchData)):[];7==this.state.entityid&&this.state.ixmbqValue&&a.push({field_name:"ixmbq",expression:"in",field_value:this.state.ixmbqValue}),(0,S.vpDownLoad)("/{vpplat}/vfrm/ent/exportfile",{quickvalue:this.state.quickvalue,ientityid:this.state.entityid,type:"expdata",viewcode:"expexcel",filtervalue:this.state.filtervalue,currentkey:this.state.currentkey,condition:(0,d["default"])(a)})}}},{key:"handleSubmit",value:function(e){"upload"==e?this.inputUploader.upload.upload():(0,S.vpDownLoad)("/{vpplat}/vfrm/ent/exportfile",{ientityid:this.state.entityid,type:""})}},{key:"render",value:function(){var e=this,t=this,a=this.state.searchData?[].concat((0,r["default"])(this.state.searchData)):[];if(7==this.state.entityid&&this.state.ixmbqValue)for(var i=this.state.ixmbqValue.split(","),n=0;n<i.length;n++)a.push({field_name:"ixmbq",expression:"eq",field_value:i[n]});var l={entityid:this.state.entityid,currentkey:this.state.currentkey,condition:(0,d["default"])(a),filtervalue:this.state.filtervalue,quickSearch:this.state.quickvalue,viewtype:"edit"==this.state.viewtype?"initeditlist":this.state.viewtype,datafilter:"auth"},s=window.vp.config.vpplat,o=[];o=s==undefined||s.custFilter==undefined?3==t.state.entityid||205==t.state.entityid?["filter","class"]:["filter","status","class"]:s.custFilter||[];var c=C["default"].createElement(S.VpMenu,{onClick:this.handleNewFormClick},this.state.classList.map(function(e,t){return C["default"].createElement(S.VpMenuItem,{key:e.iid+","+e.scode},C["default"].createElement(S.VpIconFont,{type:e.icon})," ",e.sname)})),u=[];"edit"==this.state.viewtype&&this.state.entityaddrole&&(u=[{title:"新增",tooltip:!1,className:"cursor blue",type:"plus-circle-o",iconClickFunction:this.handleEditAdd},{title:"保存",tooltip:!1,className:"cursor green",type:"save",iconClickFunction:this.handleEditSave},{title:"刷新",tooltip:!1,className:"cursor sky_blue",type:"reload",iconClickFunction:this.handleReload}]);var p=C["default"].createElement(S.VpMenu,{onClick:this.handleMenuClick},t.state.exList.map(function(e,t){return C["default"].createElement(S.VpMenuItem,{key:e.iid,type:e.iviewtype},e.sname)})),f=C["default"].createElement("div",{className:"search-form bg-white ant-dropdown-menu"},C["default"].createElement(F["default"],{onRef:this.onRef,chooseModalVisible:this.chooseModalVisible,cancelSearch:this.cancelSearch,handleSearchForm:this.handleSearchForm,entityid:this.props.params.entityid,formData:this.state.SearchFormData})),y=C["default"].createElement(S.VpMenu,{onClick:this.handleNewClick},this.state.entityList.map(function(e,t){return C["default"].createElement(S.VpMenuItem,{key:e.entityid},e.sname)})),m=this.state,h=m.viewtype,v=m.entityid;return C["default"].createElement("div",{className:"business-container pr full-height entity"},C["default"].createElement("div",{className:"subAssembly b-b bg-white",style:this.props.style},C["default"].createElement(S.VpRow,{gutter:10},C["default"].createElement(S.VpCol,{className:"gutter-row",span:4},C["default"].createElement("div",{className:"m-b-sm search entitysearch"},C["default"].createElement(N.SeachInput,{key:this.state.searchkey,onSearch:this.handlesearch}))),7==this.state.entityid?C["default"].createElement(S.VpCol,{className:"gutter-row",span:6},C["default"].createElement("div",{className:"m-b-sm ixmbqSelect"},C["default"].createElement(S.VpSelect,{multiple:!0,style:{width:"100%"},optionFilterProp:"children",placeholder:"请选择项目标签",onChange:this.onChange_ixmbq},this.state.vpOptionList))):null,C["default"].createElement(S.VpCol,{className:"gutter-row text-right",span:7==this.state.entityid?14:20},this.state.entityaddrole&&1==this.state.isaddflag?"pjtree"==h?this.state.entityList.length>0?C["default"].createElement(S.VpTooltip,{placement:"top",title:"快速创建"},C["default"].createElement(S.VpDropdown,{trigger:["click"],overlay:y},C["default"].createElement("div",{style:{display:"inline-block"}},C["default"].createElement(S.VpButton,{type:"primary",shape:"circle",icon:"plus",className:"m-l-xs"})))):"":this.state.classList.length>1&&1==this.state.isaddflag?C["default"].createElement(S.VpTooltip,{placement:"top",title:"快速创建"},C["default"].createElement(S.VpDropdown,{trigger:["click"],overlay:c},C["default"].createElement("div",{style:{display:"inline-block"}},C["default"].createElement(S.VpButton,{type:"primary",shape:"circle",icon:"plus",className:"m-l-xs"})))):C["default"].createElement("div",{style:{display:"inline-block"},onClick:t.addNewAttr.bind(t)},C["default"].createElement(N.QuickCreate,null)):"",this.state.entityaddrole&&204!=this.state.entityid?C["default"].createElement(S.VpDropdown,{trigger:["click"],overlay:p},C["default"].createElement("div",{style:{display:"inline-block"}},C["default"].createElement(S.VpTooltip,{placement:"top",title:"导入导出"},C["default"].createElement(S.VpButton,{type:"ghost",shape:"circle",className:"m-l-xs"},C["default"].createElement(S.VpIcon,{type:"cloud-upload"}))))):null,t.state.toolbar?t.state.toolbar.hasOwnProperty("left")&&t.state.toolbar.left.advanced?C["default"].createElement(S.VpDropdown,{onClick:this.handleVisibleChange,trigger:["click"],overlay:f,onVisibleChange:this.handleVisibleChange,visible:this.state.s_visible},C["default"].createElement("div",{style:{display:"inline-block"},id:"searchbox"},C["default"].createElement(N.FindCheckbox,null))):"":C["default"].createElement(S.VpDropdown,{onClick:this.handleVisibleChange,trigger:["click"],overlay:f,onVisibleChange:this.handleVisibleChange,visible:this.state.s_visible},C["default"].createElement("div",{style:{display:"inline-block"},id:"searchbox"},C["default"].createElement(N.FindCheckbox,null))),C["default"].createElement("div",{className:"fr m-l-xs"},C["default"].createElement(S.VpRadioGroup,{defaultValue:"list",className:"radio-tab",onChange:this.handleViewChange},vp.config.vpplat==undefined||vp.config.vpplat.viewlist==undefined||1!=vp.config.vpplat.viewlist.tree||"6"!=this.state.entityid&&"7"!=this.state.entityid&&"8"!=this.state.entityid?null:C["default"].createElement(S.VpRadioButton,{value:"pjtree"},C["default"].createElement(S.VpTooltip,{placement:"top",title:"树表视图"},C["default"].createElement(S.VpIconFont,{type:"vpicon-file-tree"}))),vp.config.vpplat!=undefined&&vp.config.vpplat.viewlist!=undefined&&1==vp.config.vpplat.viewlist.list?C["default"].createElement(S.VpRadioButton,{value:1==this.state.entityid?"tree":"list"},C["default"].createElement(S.VpTooltip,{placement:"top",title:"列表视图"},C["default"].createElement(S.VpIconFont,{type:"vpicon-navlist"}))):null,vp.config.vpplat!=undefined&&vp.config.vpplat.viewlist!=undefined&&1==vp.config.vpplat.viewlist.editList?C["default"].createElement(S.VpRadioButton,{value:"edit"},C["default"].createElement(S.VpTooltip,{placement:"top",title:"编辑视图"},C["default"].createElement(S.VpIconFont,{type:"vpicon-fenlei"}))):null))))),C["default"].createElement("div",{className:"business-wrapper p-t-sm full-height",id:"table"},C["default"].createElement("div",{className:"bg-white p-sm entity-list full-height"},C["default"].createElement(S.VpRow,{gutter:16,className:"full-height"},C["default"].createElement(S.VpCol,{span:o.length&&this.state.shrinkShow?"4":"0",className:"full-height pr menuleft"},C["default"].createElement(S.VpMenu,{className:"full-height scroll-y entity-left-css",onClick:this.handleClick,openKeys:this.state.openKeys,onOpen:this.onToggle,onClose:this.onToggle,selectedKeys:[this.state.filtervalue],mode:"inline"},o.map(function(t,a){return"filter"==t?e.state.myfilters.map(function(e,t){return C["default"].createElement(S.VpSubMenu,{key:"filter"+t,title:C["default"].createElement("span",null,C["default"].createElement(S.VpIconFont,{type:e.icon||"vpicon-filter",className:"m-r-xs"}),C["default"].createElement("span",null,e.name))},e.children.map(function(e,t){return C["default"].createElement(S.VpMenuItem,{key:e.value,className:"menu-text-overflow"},e.name)}))}):"class"==t?C["default"].createElement(S.VpSubMenu,{key:"class",title:C["default"].createElement("span",null,C["default"].createElement(S.VpIconFont,{type:"vpicon-fenlei",className:"m-r-xs"}),C["default"].createElement("span",null,"类别"))},e.state.classFilters.map(function(e,t){return C["default"].createElement(S.VpMenuItem,{key:e.value,className:"menu-text-overflow"},e.name)}),C["default"].createElement(S.VpMenuItem,{key:"0"},"全部")):"status"==t?C["default"].createElement(S.VpSubMenu,{key:"status",title:C["default"].createElement("span",null,C["default"].createElement(S.VpIconFont,{type:"vpicon-loading",className:"m-r-xs"}),C["default"].createElement("span",null,"状态"))},e.state.statusFilters.map(function(e,t){return C["default"].createElement(S.VpMenuItem,{key:e.value,className:"menu-text-overflow"},e.name)}),C["default"].createElement(S.VpMenuItem,{key:"0"},"全部")):void 0})),o.length&&this.state.shrinkShow?C["default"].createElement("div",{className:"navswitch cursor text-center",onClick:this.shrinkLeft},C["default"].createElement(S.VpIconFont,{type:"vpicon-navclose"})):null),C["default"].createElement(S.VpCol,{span:o.length&&this.state.shrinkShow?"20":"24",className:"full-height scroll-y"},this.state.shrinkShow?null:C["default"].createElement("div",{className:"shrink p-tb-sm cursor text-center",onClick:this.shrinkLeft},C["default"].createElement(S.VpIconFont,{type:"vpicon-navopen"})),C["default"].createElement(S.VpSpin,{spinning:this.state.spinning,size:"large"},this.state.currentkey?C["default"].createElement("div",{id:"vp-entity-drown",className:"edit"==this.state.viewtype?"batch-table":""},C["default"].createElement(N.VpDTable,{loading:this.state.tableloading,ref:function(t){return e.tableRef=t},queryMethod:"POST",onExpand:this.onExpand,expandedRowKeys:this.state.expandedRowKeys,controlAddButton:function(t,a){e.controlAddButton(t,a)},dataUrl:"/{vpplat}/vfrm/entity/dynamicListData",params:l,className:"entityTable",expandIconColumnIndex:6==v||7==v||8==v||114==v?1:0,columns:this.state.table_headers,onRowClick:"edit"==this.state.viewtype?null:this.onRowClick,tableOptions:u,bindThis:this,rowKey:"edit"==this.state.viewtype?"iid":"key",showTotal:"tree"==this.state.viewtype||"pjtree"==this.state.viewtype,resize:!0,scroll:{y:this.state.tableHeight}})):null))))),C["default"].createElement("div",{className:"drawer-fixed p-sm hide"},C["default"].createElement("div",{className:"pr full-height"},C["default"].createElement("div",{className:"spin-icon",onclick:"closeDrawer"},C["default"].createElement(S.VpIcon,{type:"verticle-left"})),C["default"].createElement("div",{className:"drawer-box"}))),C["default"].createElement(N.RightBox,{max:!this.state.isAdd,button:C["default"].createElement("div",{className:"icon p-xs",onClick:this.closeRightModal},C["default"].createElement(S.VpTooltip,{placement:"top",title:""},C["default"].createElement(S.VpIcon,{type:"right"}))),show:this.state.showRightBox},this.state.showRightBox?this.addNewDom():null),C["default"].createElement(S.VpModal,{title:"实体导入",visible:this.state.entityVisible,onCancel:function(){return e.cancelModal()},width:"70%",footer:null,wrapClassName:"modal-no-footer"},this.state.entityVisible?C["default"].createElement("div",{onClick:this.uploadClick},C["default"].createElement(S.VpInputUploader,{form:this.props.form,item:{field_name:"xls",widget_type:"inputupload",field_label:"选择文件",all_line:2,tips:"请选择文件（*.xls,*.xlsx)",auto:!1,widget:{accept:{title:"Xls",extensions:"xlsx,xls"},upload_url:"/{vpplat}/vfrm/ent/importfile?entityid="+this.state.entityid}},ref:function(t){return e.inputUploader=t},onUploadAccept:this.uploadSuccess})):null,C["default"].createElement("div",{className:"footFixed p-sm b-t text-center"},C["default"].createElement(S.VpButton,{type:"primary",onClick:function(){return e.handleSubmit("upload")}},"导入数据"),C["default"].createElement(S.VpButton,{style:{marginLeft:"10px"},type:"primary",onClick:function(){return e.handleSubmit("download")}},"下载模板"))),C["default"].createElement(S.VpModal,{title:"选择附件",visible:this.state.VpUploader,onOk:this.handleFileCancel,onCancel:this.handleFileCancel,width:"70%",height:"80%",wrapClassName:"modal-no-footer dynamic-modal"},this.state.VpUploader?C["default"].createElement(S.VpUploader,{server:"/{vpplat}/file/uploadfile",onUploadAccept:this.onUploadAccept,fileTypes:this.state.doctypelist,selectType:this.state.selectType}):null))}}]),t}(V.Component);t["default"]=I=(0,S.VpFormCreate)(I)},1526:function(e,t,a){var i=a(1527);"string"==typeof i&&(i=[[e.id,i,""]]);var n={hmr:!0};n.transform=void 0;a(439)(i,n);i.locals&&(e.exports=i.locals)},1527:function(e,t){}});